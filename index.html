<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEO战略决策智能训练系统 - 华博育士(上海)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary: #3a7bd5;
            --secondary: #00d2ff;
            --success: #4CAF50;
            --danger: #F44336;
            --warning: #FFC107;
            --dark: #212121;
            --light: #f5f7fa;
            --hby-orange: #FF6B35;
            --hby-blue: #004E89;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 100%;
            padding: 0;
            position: relative;
        }
        
        .brand-header {
            background: linear-gradient(135deg, var(--hby-blue), var(--hby-orange));
            color: white;
            padding: 15px;
            text-align: center;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .brand-logo {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .brand-logo img {
            height: 30px;
            margin-right: 10px;
        }
        
        .copyright {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .game-header {
            background-color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .game-header h1 {
            color: var(--hby-blue);
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .game-header p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 150px);
        }
        
        .tab-container {
            display: flex;
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            background: none;
            font-weight: bold;
            color: #666;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }
        
        .tab-btn.active {
            color: var(--hby-orange);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--hby-orange);
        }
        
        .tab-content {
            display: none;
            flex: 1;
            padding: 15px;
            background-color: white;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 模拟训练页样式 */
        .company-visual {
            height: 180px;
            background: linear-gradient(to bottom, #f5f7fa, #e0e6eb);
            display: flex;
            justify-content: center;
            align-items: flex-end;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .building {
            width: 70px;
            background: linear-gradient(to bottom, #74b9ff, #0984e3);
            margin: 0 5px;
            position: relative;
            transition: all 0.5s ease;
            border-radius: 5px 5px 0 0;
        }
        
        .main-tower {
            width: 90px;
            background: linear-gradient(to bottom, #fdcb6e, #e17055);
            z-index: 2;
        }
        
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--hby-blue);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: #666;
        }

        /* 个性化学习推荐链接样式：默认无下划线，悬停时有（针对含.resource-badge的推荐项内的链接） */
        .recommendation-item a, .resource-item a {
            text-decoration: none;
            color: var(--hby-blue); /* 保持链接颜色一致 */
        }
        a:hover {
            text-decoration: underline;
        }
        
        .scenario-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 4px solid var(--hby-orange);
        }
        
        .scenario-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .scenario-title i {
            margin-right: 8px;
            color: var(--hby-orange);
        }
        
        .decision-options {
            margin-bottom: 15px;
        }
        
        .option-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, var(--hby-blue), var(--primary));
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(58, 123, 213, 0.2);
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(58, 123, 213, 0.3);
        }
        
        .option-cost {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        /* 诊断分析页样式 */
        .diagnosis-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .section-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        
        .weakness-item {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .weakness-icon {
            width: 30px;
            height: 30px;
            background-color: #FFEEEE;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: var(--danger);
        }
        
        .weakness-text {
            flex: 1;
        }
        
        .weakness-title {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .weakness-desc {
            font-size: 0.8rem;
            color: #666;
        }
        
        .recommendation-card {
            background-color: #F5F9FF;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--hby-blue);
        }
        
        .recommendation-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        .recommendation-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .resource-badge {
            display: inline-block;
            padding: 3px 8px;
            background-color: var(--hby-orange);
            color: white;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-right: 5px;
        }
        
        /* 学习中心样式 */
        .knowledge-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .knowledge-category {
            margin-bottom: 15px;
        }
        
        .category-title {
            color: var(--hby-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .category-title i {
            margin-right: 8px;
            color: var(--hby-orange);
        }
        
        .resource-list {
            list-style: none;
        }
        
        .resource-item {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            align-items: center;
        }
        
        .resource-icon {
            margin-right: 10px;
            color: var(--hby-orange);
        }
        
        .progress-container {
            margin-top: 15px;
        }
        
        .progress-title {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--hby-orange), #FF9E1F);
            border-radius: 4px;
            transition: width 0.5s;
        }
        
        /* 测试题库样式 */
        .quiz-card {
    background: linear-gradient(145deg, #ffffff, #f8f9fa);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    transition: transform 0.3s ease;
    border: 1px solid rgba(0,78,137,0.1);
}

.question-card {
    background: white;
    border-radius: 10px;
    padding: 18px;
    margin-bottom: 15px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.question-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,78,137,0.15);
}

.question-card::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 4px;
    height: 100%;
    background: linear-gradient(180deg, var(--hby-orange), #FF9E1F);
}

.question-number {
    display: block;
    font-weight: bold;
    color: var(--hby-blue);
    margin-bottom: 8px;
    font-size: 0.95em;
    padding: 4px 8px;
    background: rgba(0,78,137,0.1);
    border-radius: 4px;
    width: fit-content;
}

.question-body::selection {
    background: var(--hby-orange);
    color: white;
}

.toggle-explanation {
    position: absolute;
    right: 15px;
    top: 15px;
    background: none;
    border: none;
    color: var(--hby-orange);
    font-size: 0.7rem;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s;
}

.question-card:hover .toggle-explanation {
    opacity: 1;
}
        
        .quiz-question {
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .quiz-options {
            margin-bottom: 15px;
        }
        
        

.quiz-option {
    display: block;
    padding: 12px 15px;
    margin-bottom: 8px;
    background-color: white;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.quiz-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 3px 12px rgba(0,78,137,0.1);
    border-color: var(--hby-blue);
}

.quiz-option input[type="radio"],
.quiz-option input[type="checkbox"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    width: 18px;
    height: 18px;
    border: 2px solid #ccc;
    border-radius: 50%;
    margin-right: 12px;
    position: relative;
    vertical-align: middle;
}

.quiz-option input[type="checkbox"] {
    border-radius: 4px;
}

.quiz-option input[type="radio"]:checked::before,
.quiz-option input[type="checkbox"]:checked::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 10px;
    height: 10px;
    background: var(--hby-blue);
    border-radius: 50%;
}

.quiz-option input[type="checkbox"]:checked::before {
    border-radius: 2px;
}

.quiz-option label {
    display: flex;
    align-items: center;
    padding-left: 40px;
    min-height: 24px;
}

.quiz-option label {
    display: flex;
    align-items: center;
    padding-left: 40px;
    min-height: 24px;
}

.quiz-option.user-selected {
    background-color: #f0f7ff;
    border-color: var(--hby-blue);
}

.quiz-option.user-selected:not(.correct-option) {
    border-color: #F44336 !important;
    background-color: #FFEBEE;
}

@media (max-width: 768px) {
    .quiz-option {
        padding: 10px 12px;
        font-size: 0.95em;
    }
    
    .quiz-option input[type="radio"],
    .quiz-option input[type="checkbox"] {
        margin-right: 8px;
        left: 12px;
    }
}

.judgement-options label {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
    margin: 0 5px;
}

/* 答案对比样式 */
.answer-detail {
    padding: 12px;
    margin-bottom: 10px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

/* 结果弹窗样式 */
.score-circle {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
}

.score-circle span {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--hby-blue);
}

.answer-item {
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    background: #fff;
}

.answer-item.wrong {
    border-left: 4px solid var(--danger);
    background: #FFF5F5;
}

.answer-item.correct {
    border-left: 4px solid var(--success);
    background: #F5FFF7;
}

.question-card {
    display: block !important;
    opacity: 1 !important;
    transition: opacity 0.3s;
}

.loading-indicator {
    text-align: center;
    padding: 20px;
    color: #666;
    font-size: 0.9rem;
}

.question-title {
    color: var(--hby-blue);
    font-weight: 500;
    margin-bottom: 5px;
}

.question-number {
    display: block;
    font-weight: bold;
    color: var(--hby-blue);
    margin-bottom: 8px;
    font-size: 0.95em;
    padding: 4px 8px;
    background: rgba(0,78,137,0.1);
    border-radius: 4px;
    width: fit-content;
}

.user-answer {
    color: #666;
    font-size: 0.9em;
    margin: 5px 0;
}

.correct-answer {
    color: var(--success);
    font-weight: bold;
}

/* 选项高亮增强 */
.user-selected {
    box-shadow: 0 0 0 2px var(--hby-blue);
}

.correct-option::after {
    content: '✓';
    margin-left: 8px;
    color: #4CAF50;
    font-weight: bold;
}

/* 答题反馈样式 */
.correct-answer {
    background: #e8f5e9 !important;
    border: 2px solid #4CAF50 !important;
}

.answered-wrong .quiz-option input:checked + label {
    background: #FFEBEE !important;
    border-color: #F44336 !important;
}
        
        
        
        

        

        

        
        
        .quiz-explanation {
            padding: 10px;
            background-color: #F5F9FF;
            border-radius: 6px;
            margin-top: 10px;
            display: none;
        }
        
        .quiz-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .quiz-btn {
    padding: 8px 15px;
    border: none;
    border-radius: 20px;
    background: linear-gradient(135deg, var(--hby-blue), var(--primary));
    color: white;
    font-weight: bold;
    cursor: pointer;
}

/* 新增简答题样式 */
.essay-answer {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    margin: 10px 0;
}

/* 判断题样式增强 */
.judgement-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin: 15px 0;
}

.judgement-options label {
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    font-weight: bold;
    transition: all 0.3s;
}

.judgement-options label[for^="true"] span.option-label {
    color: #2E7D32;
    font-weight: bold;
}

.judgement-options label[for^="false"] span.option-label {
    color: #C62828;
    font-weight: bold;
}

.judgement-options input:checked + label {
    background: linear-gradient(145deg, var(--hby-blue), var(--primary));
    color: white;
    border-color: transparent;
}
        
        /* 能力档案样式 */
        .profile-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .skill-radar {
            height: 250px;
            margin-bottom: 15px;
        }
        
        .skill-level {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .skill-name {
            width: 100px;
            font-size: 0.9rem;
        }
        
        .skill-bar {
            flex: 1;
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .skill-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--hby-orange), #FF9E1F);
            border-radius: 5px;
        }
        
        .skill-value {
            width: 40px;
            text-align: right;
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--hby-blue);
        }
        
        /* 反馈弹窗 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            position: relative;
        }
        
        .modal-title {
            color: var(--hby-blue);
            font-size: 1.2rem;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: #999;
        }
        
        .modal-body {
            padding: 15px;
        }

        .result-summary {
            padding: 15px;
            background: #F5F9FF;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .answer-details {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            text-align: right;
        }
        
        /* 响应式调整 */
        @media (min-width: 768px) {
            .game-area {
                flex-direction: row;
                align-items: flex-start;
            }
            
            .tab-container {
                flex-direction: column;
                width: 120px;
                border-bottom: none;
                border-right: 1px solid #e0e0e0;
            }
            
            .tab-btn {
                padding: 15px;
                text-align: left;
                border-bottom: 1px solid #e0e0e0;
            }
            
            .tab-btn.active::after {
                bottom: 0;
                left: auto;
                right: -1px;
                width: 3px;
                height: 100%;
            }
            
            .tab-content {
                flex: 1;
            }
        }

        /* 移动端适配 */
        @media (max-width: 768px) {
            .quiz-card {
                margin: 10px;
                padding: 15px;
            }
            
            .question-card {
                padding: 12px;
                margin-bottom: 12px;
            }
            
            .quiz-option {
                padding: 10px 12px;
                font-size: 0.95em;
            }
            
            .judgement-options {
                grid-template-columns: 1fr;
            }
        }
        
        /* 动画效果 */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        /* 徽章效果 */
    .badge {
        display: inline-block;
        padding: 3px 8px;
        background-color: var(--hby-orange);
        color: white;
        border-radius: 10px;
        font-size: 0.7rem;
        margin-left: 5px;
    }
    
    .category-divider {
        border: none;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--hby-orange), transparent);
        margin: 20px 0;
    }

    @media (prefers-color-scheme: dark) {
        .quiz-card {
            background: #2d2d2d;
            border-color: #404040;
        }
        
        .question-card {
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        .quiz-option {
            background: #333;
            border-color: #404040;
        }
    }
</style>
</head>
<body>
    <div class="container">
        <div class="brand-header">
            <div class="brand-logo">
                <img src="logo.jpg" alt="华博育士logo" style="width: 40px; height: auto;">
                华博育士(上海)
            </div>
            <div class="copyright">© 2023 华博育士(上海) 版权所有</div>
        </div>
        
        <div class="game-header">
            <h1>CEO战略决策智能训练系统</h1>
            <p>专业版 - 提升高管团队战略思维与决策能力</p>
        </div>
        
        <div class="game-area">
            <div class="tab-container">
                <button class="tab-btn active" onclick="switchTab('simulation')">
                    <i>🏢</i> 商业模拟
                </button>
                <button class="tab-btn" onclick="switchTab('diagnosis')">
                    <i>🔍</i> 智能诊断
                </button>
                <button class="tab-btn" onclick="switchTab('knowledge')">
                    <i>📚</i> 学习中心
                </button>
                <button class="tab-btn" onclick="switchTab('quiz')">
                    <i>✍️</i> 能力测试
                </button>
                <button class="tab-btn" onclick="switchTab('profile')">
                    <i>📊</i> 能力档案
                </button>
            </div>
            
            <!-- 商业模拟页 -->
            <div class="tab-content active" id="simulationTab">
                <div class="company-visual" id="companyVisual">
                    <div class="building" style="height: 60px;"></div>
                    <div class="building main-tower" style="height: 100px;"></div>
                    <div class="building" style="height: 50px;"></div>
                </div>
                
                <div class="stats-bar">
                    <div class="stat-card">
                        <div class="stat-value" id="marketShare">32%</div>
                        <div class="stat-label">市场份额</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="revenue">¥1.2B</div>
                        <div class="stat-label">季度营收</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="profit">¥180M</div>
                        <div class="stat-label">季度利润</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="riskIndex">45</div>
                        <div class="stat-label">风险指数</div>
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}

function updateDiagnosisProgress() {
    const checkboxes = document.querySelectorAll('.improvement-checkbox');
    const total = checkboxes.length;
    const completed = [...checkboxes].filter(cb => cb.checked).length;
    const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
    
    // 更新总进度条
    document.querySelector('#diagnosis-progress .progress-fill').style.width = `${progress}%`;
    document.querySelector('#diagnosis-progress .progress-percent').textContent = `${progress}%`;
    
    // 更新分类进度
    updateCategoryProgress('strategy');
    updateCategoryProgress('change');
    updateCategoryProgress('risk');
}

function updateCategoryProgress(category) {
    const checkboxes = document.querySelectorAll(`.improvement-checkbox[data-category="${category}"]`);
    const completed = [...checkboxes].filter(cb => cb.checked).length;
    const progress = checkboxes.length > 0 ? Math.round((completed / checkboxes.length) * 100) : 0;
    
    document.querySelector(`[data-category="${category}"] .progress-fill`).style.width = `${progress}%`;
    document.querySelector(`[data-category="${category}"] .progress-percent`).textContent = `${progress}%`;
}

// 初始化事件监听
document.querySelectorAll('.improvement-checkbox').forEach(checkbox => {
    checkbox.addEventListener('change', updateDiagnosisProgress);
});

                        

                        // 添加提交函数
function submitQuiz(e) {
    e.preventDefault();
    const questions = document.querySelectorAll('.question-card');
    let correctCount = 0;

    questions.forEach(question => {
        const correctAnswer = question.dataset.answer;
        const selected = Array.from(question.querySelectorAll('input:checked')).map(input => input.value).join(',');
        
        // 标记正确/错误
        if (selected === correctAnswer) {
            correctCount++;
            question.classList.add('answered-correct');
        } else {
            question.classList.add('answered-wrong');
            // 高亮正确答案
            question.querySelectorAll('input').forEach(input => {
                if (input.value === correctAnswer) {
                    input.parentElement.classList.add('correct-answer');
                }
            });
        }
    });

    showResultModal(correctCount, questions.length);
}

                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="scenario-card">
                    <div class="scenario-title">
                        <i>📌</i> 当前商业挑战
                    </div>
                    <div class="scenario-text" id="scenarioText">
                        公司面临市场份额连续三个季度下滑，竞争对手推出了颠覆性产品，董事会要求立即采取行动扭转局面。作为CEO，你需要带领高管团队做出关键战略决策。
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}


                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function showResultModal(correct, total) {
    const modal = document.querySelector('.modal-content');
    const percentage = ((correct / total) * 100).toFixed(1);
    
    modal.querySelector('.modal-body').innerHTML = `
        <div class="result-summary">
            <div class="score-circle" style="background: conic-gradient(var(--hby-blue) ${percentage}%, #eee 0);">
                <span>${percentage}%</span>
            </div>
            <div class="score-detail">
                <p>正确题数：${correct}/${total}</p>
                <p>建议加强：战略分析能力</p>
            </div>
        </div>
        <div class="answer-details">
            ${Array.from(document.querySelectorAll('.question-card')).map(q => `
                <div class="answer-item ${q.classList.contains('answered-correct') ? 'correct' : 'wrong'}">
                    <div class="question">${q.querySelector('.question-body').textContent}</div>
                    <div class="user-answer">您的选择：${q.querySelector('input:checked')?.value || '未作答'}</div>
                    <div class="correct-answer">正确答案：${q.dataset.answer}</div>
                </div>
            `).join('')}
        </div>
    `;
    document.querySelector('.modal-overlay').style.display = 'flex';
}

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="decision-options">
                    <button class="option-btn" onclick="makeDecision(1)">
                        加大研发投入
                        <span class="option-cost">¥15,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(2)">
                        并购竞争对手
                        <span class="option-cost">¥30,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(3)">
                        优化现有产品线
                        <span class="option-cost">¥5,000,000</span>
                    </button>
                    <button class="option-btn" onclick="makeDecision(4)">
                        开拓新兴市场
                        <span class="option-cost">¥20,000,000</span>
                    </button>
                </div>
                
                <div class="scenario-card">
                    <div class="scenario-title">
                        <i>📝</i> 决策日志
                    </div>
                    <div id="decisionLog" style="max-height: 150px; overflow-y: auto;">
                        <!-- 决策日志将通过JS动态填充 -->
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}

                    

                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }
                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
            </div>
            
            <!-- 智能诊断页 -->
            <div class="tab-content" id="diagnosisTab">
                <div class="diagnosis-card">
                    <h3 class="section-title">决策弱点诊断</h3>

                    <script>
                        // 存储最近5次决策记录的数组
                        let decisionHistory = [];

                        // 记录新决策的函数（需在实际决策操作后调用）
                        function recordDecision(metrics) {
                            decisionHistory.push(metrics);
                            if (decisionHistory.length > 5) decisionHistory.shift(); // 保持最近5条
                            updateWeaknessDiagnosis(); // 记录后立即更新诊断
                        }

                        // 更新弱点诊断内容的核心函数
                        function updateWeaknessDiagnosis() {
                            // 风险控制不足诊断（示例：统计风险指数>60的次数）
                            const riskExceedCount = decisionHistory.filter(d => d.riskIndex > 60).length;
                            document.getElementById('riskControlDesc').textContent = `过去${decisionHistory.length}次决策中有${riskExceedCount}次风险指数超过60，显示风险偏好较高`;

                            // 长期战略缺失诊断（示例：计算研发投入平均占比）
                            const avgRND = decisionHistory.reduce((sum, d) => sum + d.rndRatio, 0) / (decisionHistory.length || 1);
                            document.getElementById('strategyMissingDesc').textContent = `研发投入占比平均为${(avgRND*100).toFixed(1)}%，低于行业标杆企业${(30 - avgRND*100).toFixed(1)}个百分点`;

                            // 团队协同不足诊断（示例：计算协同效率平均分）
                            const avgCollab = decisionHistory.reduce((sum, d) => sum + d.collabScore, 0) / (decisionHistory.length || 1);
                            document.getElementById('collaborationDesc').textContent = `跨部门决策执行效率平均评分为${avgCollab.toFixed(0)}/100`;
                        }
                    </script>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>⚠️</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">风险控制不足</div>
                            <div class="weakness-desc" id="riskControlDesc">过去5次决策中有3次风险指数超过60，显示风险偏好较高</div>
                        </div>
                    </div>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>⚠️</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">长期战略缺失</div>
                            <div class="weakness-desc" id="strategyMissingDesc">研发投入占比低于行业标杆企业15个百分点</div>
                        </div>
                    </div>
                    
                    <div class="weakness-item">
                        <div class="weakness-icon">
                            <i>⚠️</i>
                        </div>
                        <div class="weakness-text">
                            <div class="weakness-title">团队协同不足</div>
                            <div class="weakness-desc" id="collaborationDesc">跨部门决策执行效率评分仅为68/100</div>
                        </div>
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}


                    

                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="recommendation-card">
                    <h3 class="section-title">个性化学习推荐</h3>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">书籍</span>
                        <a href="https://zhuanlan.zhihu.com/p/612603711" target="_blank">《黑天鹅：如何应对不可预知的未来》- 纳西姆·尼古拉斯·塔勒布</a>
                    </div>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">方法论</span>
                        <a href="https://example.com/scenario-planning" target="_blank">情景规划训练：应对不确定性的战略工具</a>
                    </div>
                    
                    <div class="recommendation-item">
                        <span class="resource-badge">课程</span>
                        <a href="https://example.com/risk-management-course" target="_blank">"战略风险管理" - 华博育士高管课程</a>
                    </div>
                    
                    <div class="recommendation-item">
        <span class="resource-badge">工具</span>
        <a href="https://example.com/decision-matrix" target="_blank">风险-收益平衡决策矩阵模板</a>
    </div>
    <div class="recommendation-item">
        <span class="resource-badge">工具</span>
        <a href="https://example.com/risk-analysis" target="_blank">战略风险分析工具包</a>
    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}
                    

                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="diagnosis-card">
                    <h3 class="section-title">改进计划</h3>
                    <p>基于您的决策模式分析，建议采取以下改进措施：</p>
                    <ol style="margin-top: 10px; padding-left: 20px;">
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateImprovementProgress('reading')" data-improve-type="reading"><span style="margin-left: 8px;">完成《黑天鹅》阅读并提交读书笔记</span></li>
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateImprovementProgress('workshop')" data-improve-type="workshop"><span style="margin-left: 8px;">参加情景规划工作坊（2天）</span></li>
                        <li style="margin-bottom: 8px; display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateImprovementProgress('risk')" data-improve-type="risk"><span style="margin-left: 8px;">在下一轮模拟中控制风险指数在40-60区间</span></li>
                        <li style="display: flex; align-items: center;"><input type="checkbox" class="improvement-checkbox" onchange="updateImprovementProgress('meeting')" data-improve-type="meeting"><span style="margin-left: 8px;">每月召开跨部门战略协调会</span></li>
                    </ol>

                    <script>
                        function updateProgress() {
                            // 仅处理改进计划相关复选框
                            const improveCheckboxes = document.querySelectorAll('.improvement-checkbox');
                            let completedCount = 0;
                            
                            improveCheckboxes.forEach(checkbox => {
                                if(checkbox.checked) completedCount++;
                            });

                            // 独立进度计算逻辑
                            const totalItems = improveCheckboxes.length;
                            const progress = totalItems > 0 ? Math.round((completedCount / totalItems) * 100) : 0;
                            
                            // 仅更新改进计划专用进度条（需要确认DOM中存在该元素）
                            const improveProgress = document.querySelector('#improve-progress');
                            if(improveProgress) {
                                improveProgress.querySelector('.progress-fill').style.width = progress + '%';
                                improveProgress.querySelector('.progress-percent').textContent = progress + '%';
                            }
                        }

                        function updateDiagnosis() {
                            // 获取决策日志数据（示例数据，需根据实际决策逻辑调整）
                            const decisionLog = document.querySelectorAll('#decisionLog div');
                            const recentDecisions = Array.from(decisionLog).slice(-5);
                            const highRiskCount = recentDecisions.filter(decision => {
                                const riskIndex = parseInt(decision.textContent.match(/风险指数：(\d+)/)?.[1] || 0);
                                return riskIndex > 60;
                            }).length;

                            // 更新风险控制弱点描述
                            document.getElementById('riskControlDesc').textContent =
                                `过去5次决策中有${highRiskCount}次风险指数超过60，显示风险偏好较高`;

                            // 示例：更新长期战略弱点（需结合实际研发数据）
                            const rndInvestment = 25; // 假设当前研发投入占比
                            const benchmark = 40;
                            document.getElementById('strategyMissingDesc').textContent =
                                `研发投入占比（${rndInvestment}%）低于行业标杆企业（${benchmark}%）${benchmark - rndInvestment}个百分点`;

                            // 示例：更新团队协同弱点（需结合实际效率数据）
                            const collaborationScore = 75; // 假设当前效率评分
                            document.getElementById('collaborationDesc').textContent =
                                `跨部门决策执行效率评分提升至${collaborationScore}/100`;
                        }

                        // 在每次决策后调用更新诊断
                        function makeDecision(option) {
                            // 原有决策逻辑...
                            updateDiagnosis(); // 新增调用
                        }
                    </script>
                    
                    <div class="progress-container" id="diagnosis-progress" style="margin-top: 15px;">
                    <div class="progress-title">
                        <span>诊断进度</span>
                        <span class="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}

                        

                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
            </div>
            
            <!-- 学习中心页 -->
            <div class="tab-content" id="knowledgeTab">
                <!-- 动态进度容器，通过JS更新 -->
                
                <div class="knowledge-card">
                    <h3 class="section-title">推荐学习资源</h3>
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>📖</i> 战略管理
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📘</span>
                                <a href="https://example.com/good-strategy" target="_blank">《好战略，坏战略》- 理查德·鲁梅尔特</a>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">🎧</span>
                                <a href="https://example.com/strategy-audio" target="_blank">"战略思维培养"音频课程</a>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📽️</span>
                                <a href="https://example.com/huawei-case" target="_blank">华为战略管理实践案例</a>
                            </li>
                        </ul>
                    </div>
                    
                    <hr class="category-divider">
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>🔄</i> 变革管理
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📘</span>
                                <a href="https://example.com/leading-change" target="_blank">《领导变革》- 约翰·科特</a>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📽️</span>
                                <a href="https://example.com/microsoft-case" target="_blank">微软数字化转型案例研究</a>
                            </li>
                        </ul>
                    </div>
                    
                    <hr class="category-divider">
                    
                    <div class="knowledge-category">
                        <div class="category-title">
                            <i>📈</i> 风险管理
                        </div>
                        <ul class="resource-list">
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📘</span>
                                <a href="https://example.com/black-swan" target="_blank">《黑天鹅》- 纳西姆·塔勒布</a>
                            </li>
                            <li class="resource-item" style="display: flex; align-items: center; justify-content: flex-start;">
                                <span class="resource-icon">📝</span>
                                <a href="https://example.com/risk-matrix" target="_blank">风险矩阵工具模板</a>
                            </li>
                        </ul>
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}


                    
                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                

            </div>
            
            <!-- 能力测试页 -->
            <div class="tab-content" id="quizTab">
                <div class="quiz-card">
    <div class="progress-container">
    <div class="progress-title">
        <span>答题进度</span>
        <span id="progress-text">0/15</span>
    </div>
    <div class="progress-bar">
        <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
    </div>
</div>
    <h3 class="section-title">战略决策能力测试</h3>
        <div id="quizContainer" class="quiz-container">
            <!-- 题目将动态渲染到这里 -->
        </div>
        <div class="quiz-actions">
        <button class="quiz-btn" onclick="submitQuiz(event)" style="background: linear-gradient(135deg, #4CAF50, #45a049)">
    📩 提交试卷
</button>
    </div>
</div>
            </div>
            
            <!-- 能力档案页 -->
            <div class="tab-content" id="profileTab">
                <div class="profile-card">
                    <h3 class="section-title">战略能力评估</h3>
                    <div class="skill-radar">
                        <canvas id="radarChart"></canvas>
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}


                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }

                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="profile-card">
                    <h3 class="section-title">能力成长轨迹</h3>
                    
                    <div class="skill-level">
                        <div class="skill-name">战略视野</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 65%"></div>
                        </div>
                        <div class="skill-value">65</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">风险控制</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 45%"></div>
                        </div>
                        <div class="skill-value">45</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">执行效率</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 72%"></div>
                        </div>
                        <div class="skill-value">72</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">创新思维</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 58%"></div>
                        </div>
                        <div class="skill-value">58</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">团队协作</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 60%"></div>
                        </div>
                        <div class="skill-value">60</div>
                    </div>
                    
                    <div class="skill-level">
                        <div class="skill-name">财务敏锐</div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 68%"></div>
                        </div>
                        <div class="skill-value">68</div>
                    </div>



                    <script>
                        // 新增抽题逻辑
                        function loadQuiz() {
    renderQuestions(questions);
}



function loadQuizQuestions() {
    const questions = getRandomQuestions();
    renderQuestions(questions);
}

function renderQuestions() {
    const quizContainer = document.getElementById('quizContainer');
    if (!quizContainer || !questionBank?.length) {
        console.error('初始化失败：容器或题库数据异常');
        return;
    }
    const container = document.getElementById('quizContainer');
    if (!container) {
        console.error('找不到题目容器');
        return;
    }
    
    // 按题型分类抽取
    const types = ['单项选择题', '多项选择题', '判断题'];
    const selected = types.map(t => 
        questionBank.filter(q => q.type === t)
                   .sort(() => 0.5 - Math.random())
                   .slice(0,5)
    ).flat();

    // 生成带序号的题目
    const questions = selected.slice(0,15).map((q, i) => ({...q, num: i+1}));
    
    container.innerHTML = questions.map(q => `
        <div class="question-card" data-answer="${q.answer}">
            <div class="question-header">
                <span class="question-number">第${q.num}题</span>
                <div class="question-body">${q.content}</div>
                <button class="toggle-explanation">点击展开解析</button>
            </div>
            <div class="quiz-explanation" style="display:none">
                <div class="correct-answer" style="color:var(--success);font-weight:bold;margin-bottom:10px;">
                    正确答案：${q.answer}
                </div>
                <div style="color:#666;font-size:0.9em;">
                    ${q.explanation || '暂无解析内容'}
                </div>
            </div>
            <div class="quiz-options">
                ${Object.entries(q.options).map(([key, val]) => `
                    <label class="quiz-option">
                        <input type="${q.type === '多项选择题' ? 'checkbox' : 'radio'}" 
                               name="q${q.num}" 
                               value="${key}">
                        <span class="option-label">${key}. ${val}</span>
                    </label>
                `).join('')}
            </div>
        </div>
    `).join('');

    // 绑定解析切换事件
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.parentElement.nextElementSibling;
            explanation.style.display = explanation.style.display === 'none' ? 'block' : 'none';
            this.textContent = explanation.style.display === 'none' ? '点击展开解析' : '收起解析';
        });
    });

    // 处理判断题选项
document.querySelectorAll('.judgement-options label').forEach(label => {
    const isTrue = label.textContent.includes('true');
    label.innerHTML = `
        <span class="option-label">
            ${isTrue ? 'A. 正确' : 'B. 错误'}
        </span>
    `;
});

// 处理常规题目选项
document.querySelectorAll('.quiz-option').forEach(option => {
    const input = option.querySelector('input');
    const label = option.querySelector('label');
    if (label && input) {
        const optionLetter = input.value.toUpperCase();
        label.innerHTML = `
            <span class="option-label">
                ${optionLetter}. ${label.textContent.replace(/^[A-Z]\.?\s*/, '')}
            </span>
        `;
    }
});

    // 绑定答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            updateProgress();
        });
    });
}

function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

function updateLearningProgress() {
    // 学习中心专用进度更新逻辑
    const categories = ['strategy', 'change', 'risk'];
    categories.forEach(category => {
        const checkboxes = document.querySelectorAll(`.resource-checkbox[data-category="${category}"]`);
        const checked = [...checkboxes].filter(checkbox => checkbox.checked).length;
        const progress = (checked / checkboxes.length) * 100;

        const progressFill = document.querySelector(`[data-category="${category}"] .progress-fill`);
        const progressPercent = document.querySelector(`[data-category="${category}"] .progress-percent`);

        if (progressFill && progressPercent) {
            progressFill.style.width = `${progress}%`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }
    });
}

function updateDiagnosisProgress() {
    const checkboxes = document.querySelectorAll('.improvement-checkbox');
    const total = checkboxes.length;
    const completed = [...checkboxes].filter(cb => cb.checked).length;
    const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
    
    // 更新总进度条
    document.querySelector('#diagnosis-progress .progress-fill').style.width = `${progress}%`;
    document.querySelector('#diagnosis-progress .progress-percent').textContent = `${progress}%`;
    
    // 更新分类进度
    updateCategoryProgress('strategy');
    updateCategoryProgress('change');
    updateCategoryProgress('risk');
}

function updateCategoryProgress(category) {
    const checkboxes = document.querySelectorAll(`.improvement-checkbox[data-category="${category}"]`);
    const completed = [...checkboxes].filter(cb => cb.checked).length;
    const progress = checkboxes.length > 0 ? Math.round((completed / checkboxes.length) * 100) : 0;
    
    document.querySelector(`[data-category="${category}"] .progress-fill`).style.width = `${progress}%`;
    document.querySelector(`[data-category="${category}"] .progress-percent`).textContent = `${progress}%`;
}

// 初始化事件监听
document.querySelectorAll('.improvement-checkbox').forEach(checkbox => {
    checkbox.addEventListener('change', updateDiagnosisProgress);
});


                        function arraysEqual(a, b) {
                            return a.length === b.length && a.every((v, i) => v === b[i]);
                        }


                        function closeResult() {
                            document.getElementById('resultModal').style.display = 'none';
                            document.querySelector('.container').style.filter = 'none';
                        }

                        document.querySelector('[onclick="switchTab(\'quiz\')"]').addEventListener('click', loadQuizQuestions);
                    </script>
                </div>
                
                <div class="profile-card">
                    <h3 class="section-title">能力证书</h3>
                    <p>完成以下学习目标可申请华博育士认证证书：</p>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li style="margin-bottom: 8px;">所有核心能力达到60分以上</li>
                        <li style="margin-bottom: 8px;">完成至少3门推荐课程</li>
                        <li style="margin-bottom: 8px;">通过最终能力评估</li>
                    </ul>
                    <button class="quiz-btn" style="margin-top: 15px;">申请能力认证</button>
                </div>
            </div>
    </div>
</div>
    
    <!-- 反馈弹窗 -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">决策反馈</h3>
                <button class="modal-close" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalFeedbackContent">
                <!-- 反馈内容将通过JS动态填充 -->
            </div>
            <div class="modal-footer">
                <button class="quiz-btn" onclick="closeModal()">确认</button>
            </div>
        </div>
    </div>

    <!-- 测试结果弹窗 -->
    <div class="modal-overlay" id="resultModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">测试结果</h3>
                <button class="modal-close" onclick="closeResult()">×</button>
            </div>
            <div class="modal-body">
                <div class="result-summary">
                    <div class="progress-container" style="margin: 15px 0">
                        <div class="progress-title">
                            <span>正确率</span>
                            <span class="progress-percent" id="accuracyRate">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="result-stats">
                        <span>正确题数：<strong id="correctCount">0</strong></span>
                        <span style="margin-left: 20px">总题数：<strong id="totalCount">0</strong></span>
                    </div>
                </div>
                <div class="answer-details" id="answerDetails"></div>
            </div>
        </div>
    </div>
    
    <!-- 音频元素 -->
    <audio id="positiveSound" src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-221.mp3" preload="auto"></audio>
    <audio id="negativeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-688.mp3" preload="auto"></audio>
    <audio id="neutralSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" preload="auto"></audio>
    <audio id="envSound" src="https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3" preload="auto"></audio>
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" preload="auto"></audio>

    <script>
        // 题目数据存储
let questionBank = [
{
            "type": "单项选择题",
            "content": "战略思维是一种怎样的思考方式？",
            "options": {"A": "低层次的、局部性的", "B": "高层次的、全局性的", "C": "中层的、阶段性的",
                        "D": "基层的、细节性的"},
            "answer": "B",
            "explanation": "战略思维是一种高层次的、全局性的思考方式，涉及到对复杂问题的分析、规划和决策。"
        },
        {
            "type": "单项选择题",
            "content": "战略规划中，什么是关键要素？",
            "options": {"A": "模仿", "B": "创新", "C": "保守", "D": "跟随"},
            "answer": "B",
            "explanation": "在战略规划中，创新是关键，它要求能够提出新的思路和方法来应对挑战。"
        },
        {
            "type": "单项选择题",
            "content": "战略思维强调从什么角度考虑问题？",
            "options": {"A": "局部和短期利益", "B": "整体和长远角度", "C": "个人和即时利益", "D": "部门和阶段利益"},
            "answer": "B",
            "explanation": "战略思维强调从整体和长远的角度考虑问题，而不是仅仅局限于局部或短期利益。"
        },
        
        {
            "type": "判断题",
            "content": "企业采用市场多元化策略不利于降低潜在的贸易风险。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，企业应避免对单一市场的过度依赖，积极开拓多元化的国际市场，以降低潜在的贸易风险。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "国际市场的标准化特点会增加企业的生产和交易成本。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，标准化是指商品和服务在质量、安全、环保等方面的标准一致化，有助于降低企业的生产和交易成本。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "国际市场的一体化特点会阻碍国际贸易和投资的增长。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，一体化是指市场整合和统一，促进了国际贸易和投资的增长。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "国际市场的同步化特点不要求企业具备快速响应市场变化的能力。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，同步化是指全球市场对信息、技术、时尚等的同步接收和反应，要求企业具备快速响应市场变化的能力。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "企业在全球化经营中不需要运用风险管理工具。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，企业可以运用风险评估矩阵、应急预案等风险管理工具，建立完善的风险管理体系，降低潜在风险带来的损失。所以该说法错误。"
        },
        {
            "type": "单项选择题",
            "content": "项目管理从经验式向科学化、规范化转型的推动因素不包括以下哪一项（  ）",
            "options": {"A": "工业革命的推进", "B": "科学技术的飞速发展", "C": "工匠们的个人经验积累",
                        "D": "现代项目管理工具的诞生"},
            "answer": "C",
            "explanation": "根据recall slice 2，随着工业革命的推进和科学技术的飞速发展，项目管理逐渐从经验式向科学化、规范化转型，科学管理理论的引入，以及工作分解结构（WBS）、里程碑、关键路径法（CPM）等现代项目管理工具的诞生，推动了项目管理的发展。而工匠们的个人经验积累是经验式项目管理阶段的特点，并非转型的推动因素。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "在项目管理中，执行力是项目成功的关键因素，以下哪项不属于其原因（  ）",
            "options": {"A": "确保项目团队按照计划有序推进工作", "B": "能及时解决遇到的问题", "C": "项目规划可以不完善",
                        "D": "保证项目按时、按质量、按预算完成"},
            "answer": "C",
            "explanation": "由recall slice 2可知，一个项目无论规划多么完善，如果缺乏有效的执行力，都难以实现预期目标。高效的执行力能够确保项目团队按照计划有序地推进工作，及时解决遇到的问题，保证项目按时、按质量、按预算完成。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "执行力在项目启动阶段的体现是（  ）",
            "options": {"A": "制定详细的项目计划", "B": "对项目需求的准确理解和项目目标的明确设定",
                        "C": "及时解决项目中的问题", "D": "总结项目经验教训"},
            "answer": "B",
            "explanation": "根据recall slice 3，在项目启动阶段，执行力体现在对项目需求的准确理解和项目目标的明确设定上，只有具备强大的执行力，才能确保项目团队在启动阶段就形成共识，为后续工作奠定坚实基础。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "在项目执行阶段，执行力的关键作用不包括（  ）",
            "options": {"A": "确保项目按计划进行", "B": "及时解决问题", "C": "制定项目目标", "D": "保持团队协作"},
            "answer": "C",
            "explanation": "由recall slice 3可知，在项目执行阶段，执行力是确保项目按计划进行、及时解决问题和保持团队协作的关键。而制定项目目标是项目启动阶段的任务。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "执行力对项目资源的作用是（  ）",
            "options": {"A": "浪费项目资源", "B": "促进项目资源的优化配置", "C": "不影响资源配置", "D": "随意分配资源"},
            "answer": "B",
            "explanation": "根据recall slice 2，高效的执行力能够促进项目资源的优化配置，通过合理的资源分配和调度，项目团队能够确保资源得到最大化利用，从而提高项目效率、降低成本。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "甘特图在项目管理中的作用是（  ）",
            "options": {"A": "只能用于记录项目的重要活动", "B": "展示项目组件之间的关系",
                        "C": "表示项目中的人力和设备资源分布",
                        "D": "通过时间轴和任务条来展示项目的计划和实际进度，帮助项目经理实时监控项目状态"},
            "answer": "D",
            "explanation": "由recall slice 5可知，甘特图是项目管理中最常用的工具之一，它通过时间轴和任务条来展示项目的计划和实际进度，帮助项目经理实时监控项目状态。记录项目的重要活动是里程碑图的作用，展示项目组件之间的关系是网络图的作用，表示项目中的人力和设备资源分布是资源图的作用。所以选D。"
        },
        {
            "type": "单项选择题",
            "content": "在项目规划阶段，执行力的体现是（  ）",
            "options": {"A": "制定详细、可行的项目计划和资源分配方案", "B": "解决项目中的突发问题",
                        "C": "对项目成果进行评估", "D": "发现项目进度偏差"},
            "answer": "A",
            "explanation": "根据recall slice 3，在项目规划阶段，执行力体现在制定详细、可行的项目计划和资源分配方案上，通过高效的执行力，项目团队能够制定出符合实际需求的计划，为项目的顺利实施提供保障。所以选A。"
        },
        {
            "type": "单项选择题",
            "content": "项目收尾阶段，执行力体现在（  ）",
            "options": {"A": "对项目成果的客观评估和总结经验教训", "B": "设定项目目标", "C": "执行项目计划",
                        "D": "监控项目进度"},
            "answer": "A",
            "explanation": "由recall slice 3可知，在项目收尾阶段，执行力体现在对项目成果的客观评估和总结经验教训上，通过有效的执行力，项目团队能够全面总结项目过程中的得失，为后续项目提供参考和借鉴。所以选A。"
        },
        {
            "type": "单项选择题",
            "content": "执行力不能带来以下哪种效果（  ）",
            "options": {"A": "降低团队凝聚力和士气", "B": "促进项目资源的优化配置",
                        "C": "提升团队协作和沟通的效率和质量", "D": "确保项目按计划推进"},
            "answer": "A",
            "explanation": "根据recall slice 2和recall slice 3，执行力不仅关系到项目的成败，还直接影响着项目团队的凝聚力和士气，一个执行力强的团队，能够形成积极向上的工作氛围，激发团队成员的积极性和创造力，并非降低团队凝聚力和士气。所以选A。"
        },
        {
            "type": "单项选择题",
            "content": "在项目管理中，以下哪个不是常用的项目管理图表（  ）",
            "options": {"A": "甘特图", "B": "明星八卦图", "C": "里程碑图", "D": "网络图"},
            "answer": "B",
            "explanation": "由recall slice 5可知，甘特图、里程碑图、网络图和资源图等是常用的项目管理图表，明星八卦图不属于项目管理图表。所以选B。"
        },
        {
            "type": "多项选择题",
            "content": "项目管理从经验式向科学化、规范化转型的推动因素有（  ）",
            "options": {"A": "工业革命的推进", "B": "科学技术的飞速发展", "C": "科学管理理论的引入",
                        "D": "现代项目管理工具的诞生"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "根据recall slice 2，随着工业革命的推进和科学技术的飞速发展，项目管理逐渐从经验式向科学化、规范化转型，科学管理理论的引入为项目管理提供了理论支撑，工作分解结构（WBS）、里程碑、关键路径法（CPM）等现代项目管理工具的诞生，使得项目管理的计划、执行、监控和收尾过程更加清晰、可控，推动了项目管理的发展。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "执行力在项目管理中的重要性体现在以下哪些方面（  ）",
            "options": {"A": "是项目成功的关键因素", "B": "提升团队凝聚力与士气", "C": "促进项目资源的优化配置",
                        "D": "促进项目管理中的团队协作和沟通"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 2和recall slice 3可知，执行力是项目管理成功的关键所在，能够确保项目按计划完成；能提升团队凝聚力与士气，形成积极向上的工作氛围；促进项目资源的优化配置，确保资源得到最大化利用；还能促进项目管理中的团队协作和沟通，提高团队协作和沟通的效率和质量。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "执行力在项目不同阶段的体现包括（  ）",
            "options": {"A": "项目启动阶段对项目需求的准确理解和项目目标的明确设定",
                        "B": "项目规划阶段制定详细、可行的项目计划和资源分配方案",
                        "C": "项目执行阶段确保项目按计划进行、及时解决问题和保持团队协作",
                        "D": "项目收尾阶段对项目成果的客观评估和总结经验教训"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "根据recall slice 3，在项目启动阶段，执行力体现在对项目需求的准确理解和项目目标的明确设定上；在项目规划阶段，执行力体现在制定详细、可行的项目计划和资源分配方案上；在项目执行阶段，执行力是确保项目按计划进行、及时解决问题和保持团队协作的关键；在项目收尾阶段，执行力体现在对项目成果的客观评估和总结经验教训上。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "常用的项目管理图表有（  ）",
            "options": {"A": "甘特图", "B": "里程碑图", "C": "网络图", "D": "资源图"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 5可知，甘特图、里程碑图、网络图和资源图等是常用的项目管理图表，它们分别用于展示项目的计划和实际进度、记录项目的重要活动、展示项目组件之间的关系以及表示项目中的人力和设备资源分布。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "执行力对项目团队的影响有（  ）",
            "options": {"A": "形成积极向上的工作氛围", "B": "激发团队成员的积极性和创造力",
                        "C": "增强团队成员之间的信任和默契", "D": "提高团队协作和沟通的效率和质量"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "根据recall slice 2和recall slice 3，一个执行力强的团队，能够形成积极向上的工作氛围，激发团队成员的积极性和创造力；执行力的提升有助于增强团队成员之间的信任和默契，提高团队协作和沟通的效率和质量。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "项目管理与执行力结合带来的好处有（  ）",
            "options": {"A": "确保项目按时完成", "B": "保证项目按质量完成", "C": "按预算完成项目",
                        "D": "促进项目资源的优化配置"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 2可知，高效的执行力能够确保项目团队按照计划有序地推进工作，及时解决遇到的问题，保证项目按时、按质量、按预算完成；还能促进项目资源的优化配置。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "执行力促进项目资源优化配置的表现有（  ）",
            "options": {"A": "合理的资源分配和调度", "B": "确保资源得到最大化利用", "C": "提高项目效率、降低成本",
                        "D": "更好地应对资源约束，灵活调整项目计划"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "根据recall slice 2，高效的执行力通过合理的资源分配和调度，确保资源得到最大化利用，从而提高项目效率、降低成本，还能够更好地应对资源约束，灵活调整项目计划，确保项目的顺利进行。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "在项目管理中，团队协作和沟通的重要性体现在（  ）",
            "options": {"A": "团队成员能更好地理解项目目标和要求", "B": "形成合力共同推进项目", "C": "与执行力无关",
                        "D": "有利于项目的成功"},
            "answer": ["A", "B", "D"],
            "explanation": "由recall slice 3可知，在项目管理中，团队协作和沟通是至关重要的，通过高效的团队协作和沟通，团队成员能够更好地理解项目目标和要求，形成合力共同推进项目，有利于项目的成功，而执行力的提升有助于增强团队成员之间的信任和默契，提高团队协作和沟通的效率和质量。所以选ABD。"
        },
        {
            "type": "多项选择题",
            "content": "项目管理中执行力在监控阶段的作用有（  ）",
            "options": {"A": "对项目进度、质量和成本进行实时监控", "B": "及时发现偏差", "C": "采取纠正措施",
                        "D": "制定项目计划"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 3，在项目监控阶段，执行力体现在对项目进度、质量和成本的实时监控上，通过高效的执行力，项目团队能够及时发现偏差并采取纠正措施，确保项目目标的顺利实现。制定项目计划是项目规划阶段的任务。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "提升项目管理与执行力的有效策略包括（  ）",
            "options": {"A": "加强项目管理能力的培训与提升", "B": "构建执行力强的项目团队文化",
                        "C": "利用信息技术优化项目管理与执行流程", "D": "不做任何努力"},
            "answer": ["A", "B", "C"],
            "explanation": "由recall slice 5可知，加强项目管理能力的培训与提升、构建执行力强的项目团队文化以及利用信息技术优化项目管理与执行流程是提升项目管理与执行力的有效策略。所以选ABC。"
        },
        {
            "type": "判断题",
            "content": "项目管理的起源只能追溯到现代工业革命时期。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 2，项目管理作为一种系统性的管理方法，其历史可追溯至古代文明中的宏大工程项目，如古埃及的金字塔、中国的长城等，并非只能追溯到现代工业革命时期。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "执行力在项目管理中并非关键因素。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 2可知，执行力是项目管理成功的关键所在，一个项目无论规划多么完善，如果缺乏有效的执行力，都难以实现预期目标。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "项目启动阶段不需要执行力，只需要在执行阶段体现执行力。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 3，在项目启动阶段，执行力体现在对项目需求的准确理解和项目目标的明确设定上，只有具备强大的执行力，才能确保项目团队在启动阶段就形成共识，为后续工作奠定坚实基础。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "执行力不能促进项目资源的优化配置。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 2可知，高效的执行力能够促进项目资源的优化配置，通过合理的资源分配和调度，项目团队能够确保资源得到最大化利用，从而提高项目效率、降低成本。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "甘特图在项目管理中没有作用。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 5，甘特图是项目管理中最常用的工具之一，它通过时间轴和任务条来展示项目的计划和实际进度，帮助项目经理实时监控项目状态。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "执行力不会影响项目团队的凝聚力和士气。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 2可知，执行力不仅关系到项目的成败，还直接影响着项目团队的凝聚力和士气，一个执行力强的团队，能够形成积极向上的工作氛围，激发团队成员的积极性和创造力。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "项目管理中的常用图表只有甘特图。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 5，甘特图、里程碑图、网络图和资源图等都是常用的项目管理图表。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "项目收尾阶段不需要执行力，收尾工作不重要。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 3可知，在项目收尾阶段，执行力体现在对项目成果的客观评估和总结经验教训上，通过有效的执行力，项目团队能够全面总结项目过程中的得失，为后续项目提供参考和借鉴。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "执行力不能促进项目管理中的团队协作和沟通。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 3，执行力的提升有助于增强团队成员之间的信任和默契，提高团队协作和沟通的效率和质量，促进项目管理中的团队协作和沟通。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "提升项目管理与执行力不需要采取任何策略。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 5可知，加强项目管理能力的培训与提升、构建执行力强的项目团队文化以及利用信息技术优化项目管理与执行流程是提升项目管理与执行力的有效策略。所以该说法错误。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策的核心是（）。",
            "options": {"A": "筹资决策", "B": "投资决策", "C": "营运决策", "D": "利润分配决策"},
            "answer": "B",
            "explanation": "企业经营决策的核心在于如何有效配置资源，实现企业的长期发展，这通常通过投资决策来实现。"
        },
        {
            "type": "单项选择题",
            "content": "下列哪项不属于企业经营决策的类型（）。",
            "options": {"A": "战略决策", "B": "策略决策", "C": "战术决策", "D": "技术决策"},
            "answer": "D",
            "explanation": "企业经营决策的类型通常分为战略、策略、战术和管理决策，技术决策不属于这一分类。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策的基本原则不包括（）。",
            "options": {"A": "效益原则", "B": "可行原则", "C": "系统原则", "D": "集权原则"},
            "answer": "D",
            "explanation": "企业经营决策的基本原则包括效益、可行、系统、风险等，集权原则不是决策的基本原则。"
        },
        {
            "type": "单项选择题",
            "content": "下列哪项不是企业经营决策的程序（）。",
            "options": {"A": "确定决策目标", "B": "收集信息", "C": "拟定方案", "D": "实施决策"},
            "answer": "D",
            "explanation": "企业经营决策的程序通常包括确定目标、收集信息、拟定方案、评估方案和决策实施，实施决策是决策程序的最后一个环节。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策中，影响决策的因素不包括（）。",
            "options": {"A": "内部因素", "B": "外部因素", "C": "领导因素", "D": "环境因素"},
            "answer": "D",
            "explanation": "企业经营决策的影响因素包括内部和外部因素，领导因素和环境因素都属于外部因素。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策中，战略决策的特点不包括（）。",
            "options": {"A": "长期性", "B": "综合性", "C": "风险性", "D": "灵活性"},
            "answer": "D",
            "explanation": "战略决策具有长期性、综合性和风险性，但不具有灵活性，灵活性通常是战术决策的特点。"
        },
        {
            "type": "单项选择题",
            "content": "下列哪项不是企业投资决策的类型（）。",
            "options": {"A": "扩大再生产投资", "B": "技术改造投资", "C": "购置固定资产", "D": "购置原材料"},
            "answer": "D",
            "explanation": "投资决策通常包括扩大再生产投资、技术改造投资、投资新项目等，购置原材料属于日常运营决策。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策中，营运决策的特点不包括（）。",
            "options": {"A": "短期性", "B": "预测性", "C": "灵活性", "D": "效益性"},
            "answer": "B",
            "explanation": "营运决策的特点包括短期性、预测性、灵活性和效益性，但不包括风险性，风险性是投资决策的特点。"
        },
        {
            "type": "单项选择题",
            "content": "企业经营决策中，影响决策的因素不包括（）。",
            "options": {"A": "企业规模", "B": "行业特点", "C": "政策法规", "D": "市场需求"},
            "answer": "E",
            "explanation": "企业经营决策的影响因素不包括竞争对手策略，竞争对手策略属于外部环境分析的一部分。"
        },
        {
            "type": "单项选择题",
            "content": "下列哪项不是企业经营决策的原则（）。",
            "options": {"A": "效益原则", "B": "可行原则", "C": "创新原则", "D": "集权原则"},
            "answer": "D",
            "explanation": "企业经营决策的原则包括效益、可行、系统、创新和风险等，集权原则不是决策的原则。"
        },

        {
            "type": "多项选择题",
            "content": "企业经营决策的依据包括（）。",
            "options": {"A": "内部财务报表", "B": "行业分析报告", "C": "政策法规", "D": "市场调查数据"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "企业经营决策的依据包括内部财务报表、行业分析报告、政策法规和市场调查数据，企业愿景属于企业战略的一部分。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策的程序包括（）。",
            "options": {"A": "确定决策目标", "B": "收集信息", "C": "拟定方案", "D": "评估方案", "E": "决策实施"},
            "answer": ["A", "B", "C", "D", "E"],
            "explanation": "企业经营决策的程序包括确定决策目标、收集信息、拟定方案、评估方案和决策实施。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策的类型包括（）。",
            "options": {"A": "战略决策", "B": "策略决策", "C": "战术决策", "D": "运营决策", "E": "管理决策"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "企业经营决策的类型包括战略决策、策略决策、战术决策和运营决策，管理决策不属于这一分类。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策的原则包括（）。",
            "options": {"A": "效益原则", "B": "可行原则", "C": "系统原则", "D": "创新原则", "E": "风险原则"},
            "answer": ["A", "B", "C", "D", "E"],
            "explanation": "企业经营决策的原则包括效益、可行、系统、创新和风险等。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策的影响因素包括（）。",
            "options": {"A": "内部因素", "B": "外部因素", "C": "领导因素", "D": "环境因素", "E": "技术进步"},
            "answer": ["A", "B", "C", "D", "E"],
            "explanation": "企业经营决策的影响因素包括内部因素（如企业规模、企业文化）和外部因素（如行业特点、市场需求）。"
        },
        {
            "type": "多项选择题",
            "content": "企业投资决策的类型包括（）。",
            "options": {"A": "扩大再生产投资", "B": "购置固定资产", "C": "投资新项目", "D": "购置原材料",
                        "E": "投资股票市场"},
            "answer": ["A", "B", "C", "E"],
            "explanation": "投资决策通常包括扩大再生产投资、技术改造投资、投资新项目等，购置原材料属于日常运营决策。"
        },
        {
            "type": "多项选择题",
            "content": "企业营运决策的特点包括（）。",
            "options": {"A": "短期性", "B": "预测性", "C": "灵活性", "D": "效益性", "E": "风险性"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "营运决策的特点包括短期性、预测性、灵活性和效益性，但不包括风险性，风险性是投资决策的特点。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策中，影响决策的因素不包括（）。",
            "options": {"A": "企业规模", "B": "行业特点", "C": "政策法规", "D": "市场需求", "E": "竞争对手策略"},
            "answer": ["E"],
            "explanation": "企业经营决策的影响因素不包括竞争对手策略，竞争对手策略属于外部环境分析的一部分。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策中，战略决策的制定需要考虑的因素有（）。",
            "options": {"A": "企业愿景", "B": "行业趋势", "C": "政策环境", "D": "市场需求", "E": "企业资源"},
            "answer": ["A", "B", "C", "D", "E"],
            "explanation": "战略决策的制定需要综合考虑企业愿景、行业趋势、政策环境、市场需求和企业资源。"
        },
        {
            "type": "多项选择题",
            "content": "企业经营决策中，决策方案的评估标准包括（）。",
            "options": {"A": "成本效益分析", "B": "风险评估", "C": "可行性分析", "D": "创新性评估",
                        "E": "环境影响评估"},
            "answer": ["A", "B", "C", "D", "E"],
            "explanation": "在评估决策方案时，需要综合考虑成本、效益、风险、创新性和环境影响。"
        },

        {
            "type": "判断题",
            "content": "企业经营决策的目标是追求企业价值的最大化。（）",
            "options": null,
            "answer": "×",
            "explanation": "企业经营决策的目标是确保企业目标的实现，而仅仅是追求价值最大化。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策的程序是先收集信息，再确定决策目标。（）",
            "options": null,
            "answer": "×",
            "explanation": "决策目标的确立通常是在收集信息的基础上进行的，但信息的收集并不是决策的第一步。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策的类型中，战略决策是最高层次的决策。（）",
            "options": null,
            "answer": "√",
            "explanation": "战略决策是企业长远发展的决策，通常涉及企业的整体发展方向和目标。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策的原则中，效益原则是核心原则。（）",
            "options": null,
            "answer": "√",
            "explanation": "效益原则强调决策要追求经济效益，是决策的核心原则之一。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策的影响因素中，市场需求是决定性因素。（）",
            "options": null,
            "answer": "√",
            "explanation": "市场需求是企业决策的重要外部因素，对决策有决定性影响。"
        },
        {
            "type": "判断题",
            "content": "企业投资决策的类型中，扩大再生产投资属于长期投资决策。（）",
            "options": null,
            "answer": "√",
            "explanation": "扩大再生产投资是企业为了扩大生产规模而进行的投资，属于长期投资决策。"
        },
        {
            "type": "判断题",
            "content": "企业营运决策的特点之一是决策周期较短。（）",
            "options": null,
            "answer": "√",
            "explanation": "营运决策通常针对短期运营问题，因此决策周期较短。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策中，领导风格对企业决策有重要影响。（）",
            "options": null,
            "answer": "√",
            "explanation": "领导风格会影响决策的制定和执行，是决策的重要因素之一。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策的原则中，创新原则强调的是决策的独创性。（）",
            "options": null,
            "answer": "√",
            "explanation": "创新原则鼓励企业在决策中寻求新的解决方案，但同时也需要考虑风险。"
        },
        {
            "type": "判断题",
            "content": "企业经营决策中，决策方案的评估应综合考虑成本、效益和风险。（）",
            "options": null,
            "answer": "√",
            "explanation": "在评估决策方案时，需要综合考虑成本、效益和风险，以确保决策的全面性。"
        },
        {
            "type": "单项选择题",
            "content": "亚马逊2024年季度3总营收同比增长情况是（  ）",
            "options": {"A": "10.04%", "B": "11.04%", "C": "12.04%", "D": "13.04%"},
            "answer": "B",
            "explanation": "根据recall slice 1，2024年季度3总营收为1589亿美元，同比增长11.04%。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "亚马逊的广告成本属于（  ）",
            "options": {"A": "收入项目", "B": "成本与费用项目", "C": "利润项目", "D": "预算目标项目"},
            "answer": "B",
            "explanation": "由recall slice 1可知，亚马逊的成本与费用项目繁多，包括采购成本、运营成本、广告成本、物流成本、仓储成本等。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "财务报表分析的核心内容之一是（  ）",
            "options": {"A": "收入分析", "B": "成本与费用分析", "C": "利润分析", "D": "预算管理分析"},
            "answer": "C",
            "explanation": "根据recall slice 1，利润分析是财务报表分析的核心内容之一。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "亚马逊在预算管理方面，制定年度预算目标的依据是（  ）",
            "options": {"A": "公司员工数量", "B": "公司战略目标和市场环境", "C": "公司的办公场地大小",
                        "D": "公司的历史预算数据"},
            "answer": "B",
            "explanation": "由recall slice 1可知，亚马逊在预算管理方面，首先会根据公司战略目标和市场环境，制定年度预算目标。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "预算编制过程中，亚马逊采用的方法不包括（  ）",
            "options": {"A": "零基预算", "B": "增量预算", "C": "随机预算", "D": "结合历史数据和未来预测制定预算"},
            "answer": "C",
            "explanation": "根据recall slice 1，在预算编制过程中，亚马逊会采用零基预算、增量预算等多种方法，结合历史数据和未来预测，制定详细的预算计划。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "预算管控和财务分析可以（  ）",
            "options": {"A": "相互独立，互不影响", "B": "相互借鉴方法与技术，提高工作效率和质量",
                        "C": "只考虑预算管控，不考虑财务分析", "D": "只考虑财务分析，不考虑预算管控"},
            "answer": "B",
            "explanation": "由recall slice 1可知，预算管控和财务分析可以采用相互借鉴的方法和技术，以提高工作效率和质量。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "利用信息技术建立统一的信息共享平台的作用是（  ）",
            "options": {"A": "降低信息传递的效率和准确性", "B": "提高信息传递的效率和准确性", "C": "不影响信息传递",
                        "D": "使信息传递混乱"},
            "answer": "B",
            "explanation": "根据recall slice 1，利用信息技术建立统一的信息共享平台，提高信息传递的效率和准确性。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "通过对亚马逊财务报表的分析，不能了解到的是（  ）",
            "options": {"A": "各项业务的收入规模及增长趋势", "B": "公司员工的个人爱好", "C": "成本结构及其变动情况",
                        "D": "盈利能力"},
            "answer": "B",
            "explanation": "由recall slice 1可知，通过对亚马逊的财务报表进行分析，可以清晰地看到各项业务的收入规模及增长趋势，了解亚马逊的成本结构及其变动情况，评估其盈利能力。公司员工的个人爱好无法从财务报表分析中得知。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "亚马逊将预算目标分解到（  ）",
            "options": {"A": "只分解到高层部门", "B": "各个部门和业务单元", "C": "只分解到基层员工", "D": "不进行分解"},
            "answer": "B",
            "explanation": "根据recall slice 1，亚马逊在预算管理方面，将预算目标层层分解到各个部门和业务单元，确保每个部门都清楚自己的预算责任和任务。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "对亚马逊预算计划进行审核和评估的目的是（  ）",
            "options": {"A": "让预算计划更复杂", "B": "确保其合理性和可行性", "C": "不考虑预算计划的实际情况",
                        "D": "随意调整预算计划"},
            "answer": "B",
            "explanation": "由recall slice 1可知，亚马逊会对预算计划进行严格的审核和评估，确保其合理性和可行性。所以选B。"
        },
        {
            "type": "多项选择题",
            "content": "亚马逊的收入来源包括（  ）",
            "options": {"A": "电商平台的商品销售收入", "B": "云服务收入", "C": "广告收入", "D": "物流收入"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 1，亚马逊的收入来源多样，主要包括电商平台的商品销售收入、云服务收入、广告收入等。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "亚马逊的成本与费用项目有（  ）",
            "options": {"A": "采购成本", "B": "运营成本", "C": "广告成本", "D": "物流成本"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 1可知，亚马逊的成本与费用项目繁多，包括采购成本、运营成本、广告成本、物流成本、仓储成本等。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "财务报表分析亚马逊时，可以分析的指标有（  ）",
            "options": {"A": "收入规模及增长趋势", "B": "成本结构及其变动情况", "C": "净利润、毛利率、净利率等指标",
                        "D": "员工数量"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 1，通过对亚马逊的财务报表进行分析，可以清晰地看到各项业务的收入规模及增长趋势，了解亚马逊的成本结构及其变动情况，通过对亚马逊的净利润、毛利率、净利率等指标进行分析，可以评估其盈利能力。员工数量不属于财务报表分析的指标。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "亚马逊预算管理实践包括（  ）",
            "options": {"A": "预算目标制定与分解", "B": "预算编制与审核", "C": "预算执行与监控", "D": "预算随意变更"},
            "answer": ["A", "B", "C"],
            "explanation": "由recall slice 1可知，亚马逊预算管理实践包括预算目标制定与分解、预算编制与审核、预算执行与监控。预算不能随意变更，需要遵循一定的流程和规定。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "预算编制时亚马逊采用的方法有（  ）",
            "options": {"A": "零基预算", "B": "增量预算", "C": "结合历史数据和未来预测制定预算",
                        "D": "不考虑任何数据制定预算"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 1，在预算编制过程中，亚马逊会采用零基预算、增量预算等多种方法，结合历史数据和未来预测，制定详细的预算计划。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "预算管控和财务分析相互借鉴方法与技术能带来的好处有（  ）",
            "options": {"A": "提高工作效率", "B": "提高工作质量", "C": "使两者相互独立", "D": "降低工作效率"},
            "answer": ["A", "B"],
            "explanation": "由recall slice 1可知，预算管控和财务分析可以采用相互借鉴的方法和技术，以提高工作效率和质量。所以选AB。"
        },
        {
            "type": "多项选择题",
            "content": "建立统一的信息共享平台对预算管控和财务分析的作用有（  ）",
            "options": {"A": "提高信息传递的效率", "B": "提高信息传递的准确性", "C": "降低信息传递的效率",
                        "D": "使信息传递不准确"},
            "answer": ["A", "B"],
            "explanation": "根据recall slice 1，利用信息技术建立统一的信息共享平台，提高信息传递的效率和准确性。所以选AB。"
        },
        {
            "type": "多项选择题",
            "content": "分析亚马逊财务报表可以了解到的内容有（  ）",
            "options": {"A": "业务的收入规模", "B": "业务的增长趋势", "C": "成本结构", "D": "成本变动情况"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 1可知，通过对亚马逊的财务报表进行分析，可以清晰地看到各项业务的收入规模及增长趋势，了解亚马逊的成本结构及其变动情况。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "亚马逊预算目标制定与分解的步骤包括（  ）",
            "options": {"A": "根据公司战略目标和市场环境制定年度预算目标", "B": "将预算目标层层分解到各个部门",
                        "C": "将预算目标分解到各个业务单元", "D": "不分解预算目标"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 1，亚马逊在预算管理方面，首先会根据公司战略目标和市场环境，制定年度预算目标。然后，将预算目标层层分解到各个部门和业务单元，确保每个部门都清楚自己的预算责任和任务。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "对亚马逊预算计划进行审核和评估的意义有（  ）",
            "options": {"A": "确保预算计划合理性", "B": "确保预算计划可行性", "C": "随意修改预算计划",
                        "D": "不考虑预算计划的实际情况"},
            "answer": ["A", "B"],
            "explanation": "由recall slice 1可知，亚马逊会对预算计划进行严格的审核和评估，确保其合理性和可行性。所以选AB。"
        },
        {
            "type": "判断题",
            "content": "预算管控和财务分析不能相互借鉴方法与技术。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，预算管控和财务分析可以采用相互借鉴的方法和技术，以提高工作效率和质量。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "建立统一的信息共享平台会降低信息传递的效率和准确性。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，利用信息技术建立统一的信息共享平台，提高信息传递的效率和准确性。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "亚马逊的收入来源只有电商平台的商品销售收入。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，亚马逊的收入来源多样，主要包括电商平台的商品销售收入、云服务收入、广告收入等。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "财务报表分析中利润分析不是核心内容。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，利润分析是财务报表分析的核心内容之一。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "亚马逊在预算管理方面，不需要根据公司战略目标和市场环境制定年度预算目标。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，亚马逊在预算管理方面，首先会根据公司战略目标和市场环境，制定年度预算目标。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "预算编制过程中，亚马逊只采用零基预算一种方法。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，在预算编制过程中，亚马逊会采用零基预算、增量预算等多种方法，结合历史数据和未来预测，制定详细的预算计划。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "亚马逊不需要对预算计划进行审核和评估。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，亚马逊会对预算计划进行严格的审核和评估，确保其合理性和可行性。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "通过对亚马逊财务报表分析，不能了解其成本结构及其变动情况。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，通过对亚马逊的财务报表进行分析，可以了解亚马逊的成本结构及其变动情况。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "亚马逊不将预算目标分解到各个部门和业务单元。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，亚马逊在预算管理方面，将预算目标层层分解到各个部门和业务单元，确保每个部门都清楚自己的预算责任和任务。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "亚马逊在预算管理中可以随意变更预算。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，预算管理有一定的流程和规范，不能随意变更预算，需要遵循相应的规定。所以该说法错误。"
        },
        {
            "type": "单项选择题",
            "content": "组织数智化转型对员工技能的要求是（  ）",
            "options": {"A": "只需要精通专业技术领域", "B": "只需要具备良好的沟通协作能力",
                        "C": "具备复合型技能，包括专业技术、业务逻辑、沟通协作和问题解决能力等",
                        "D": "不需要任何专业技能"},
            "answer": "C",
            "explanation": "根据recall slice 1，组织的数智化转型更看重具备复合型技能的人才，员工除了要精通专业技术领域，还需要了解业务逻辑、具备良好的沟通协作能力以及问题解决能力等。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "数智化转型中，部分传统岗位面临被替代风险，以下哪种岗位可能会被替代（  ）",
            "options": {"A": "财务分析岗位", "B": "负责基础数据录入和简单报表制作的财务岗位", "C": "财务预算管理岗位",
                        "D": "财务决策岗位"},
            "answer": "B",
            "explanation": "由recall slice 1可知，随着自动化、人工智能等技术在业务流程中的应用，一些重复性、规律性强的传统岗位面临被机器或软件替代的风险，如财务部门中负责基础数据录入和简单报表制作的岗位，可通过财务机器人实现自动化操作。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "组织数智化转型盘点与测评不能带来以下哪种作用（  ）",
            "options": {"A": "合理调整资源分配", "B": "增加转型风险", "C": "及时发现问题并解决", "D": "提升组织竞争力"},
            "answer": "B",
            "explanation": "根据recall slice 2，组织数智化转型盘点与测评可以基于盘点与测评结果合理调整资源分配，及时发现问题并采取措施加以解决，还能提升组织竞争力，适应市场变化，而不是增加转型风险。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "在绩效评估中，为确保员工工作成果与组织数智化转型方向契合，应围绕组织目标确定（  ）",
            "options": {"A": "员工福利指标", "B": "KPI", "C": "员工考勤指标", "D": "员工休假指标"},
            "answer": "B",
            "explanation": "由recall slice 3可知，围绕组织数智化转型的整体目标，确定相应的KPI，确保员工的工作成果与组织数智化转型方向紧密契合。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "在数据收集与整合实现全面绩效洞察时，从 ERP 系统中不能获取以下哪种信息（  ）",
            "options": {"A": "生产订单完成情况", "B": "员工的家庭住址", "C": "成本数据", "D": "库存数据"},
            "answer": "B",
            "explanation": "根据recall slice 3，从ERP系统中可以获取生产订单完成情况、成本数据等信息，员工的家庭住址不属于从ERP系统获取的绩效相关信息。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "在组织数智化转型测评的数据收集阶段，对于问卷调查，需要（  ）",
            "options": {"A": "问卷发放范围小且无代表性", "B": "不进行数据录入和整理",
                        "C": "确保问卷发放范围广泛且具有代表性，提高问卷回收率，并对回收的有效问卷进行数据录入和整理",
                        "D": "随意处理问卷数据"},
            "answer": "C",
            "explanation": "由recall slice 4可知，对于问卷调查，要确保问卷的发放范围广泛且具有代表性，提高问卷回收率，并对回收的有效问卷进行数据录入和整理。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "在组织数智化转型测评的数据分析与结果解读阶段，运用的数据分析方法不包括（  ）",
            "options": {"A": "描述性统计分析", "B": "相关性分析", "C": "随机分析", "D": "对比分析"},
            "answer": "C",
            "explanation": "根据recall slice 4，运用合适的数据分析方法（如描述性统计分析各指标的现状、相关性分析探究不同因素之间的关联、对比分析看转型前后的变化等）对整理好的数据进行深入分析。随机分析不属于常用的数据分析方法。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "在组织数智化转型中，宣传企业文化的作用不包括（  ）",
            "options": {"A": "增强人才对企业的认同感和归属感", "B": "让人才感受到企业的人文关怀和良好氛围",
                        "C": "降低企业的知名度", "D": "吸引人才加入企业"},
            "answer": "C",
            "explanation": "由recall slice 5可知，宣传企业积极向上、鼓励创新、包容失败的企业文化，强调在数智化转型过程中为员工提供的学习机会、职业发展空间以及舒适的工作环境等，能让人才感受到企业的人文关怀和良好氛围，增强对企业的认同感和归属感，吸引人才加入企业，而不是降低企业的知名度。所以选C。"
        },
        {
            "type": "单项选择题",
            "content": "在利用数智化手段开展培训和开发工作时，精准分析培训需求的数据收集不包括（  ）",
            "options": {"A": "员工的岗位信息", "B": "员工的兴趣爱好", "C": "员工的绩效表现", "D": "员工的技能水平"},
            "answer": "B",
            "explanation": "根据recall slice 5，借助组织内部的信息系统收集员工的各类数据，包括岗位信息、绩效表现、技能水平、职业发展规划等，员工的兴趣爱好不属于精准分析培训需求收集的数据范畴。所以选B。"
        },
        {
            "type": "单项选择题",
            "content": "在定制化培训内容开发时，将传统培训内容进行数字化转换和模块化拆分的目的是（  ）",
            "options": {"A": "让培训内容更复杂", "B": "方便根据不同的培训需求灵活组合", "C": "减少培训内容",
                        "D": "不考虑培训需求"},
            "answer": "B",
            "explanation": "由recall slice 5可知，将传统的培训教材、教案等内容进行数字化转换，制作成多样化的数字资源，同时按照知识点或技能点将这些内容进行模块化拆分，方便根据不同的培训需求灵活组合。所以选B。"
        },
        {
            "type": "多项选择题",
            "content": "组织数智化转型对员工职业规划的影响有（  ）",
            "options": {"A": "促使员工注重多维度能力的培养", "B": "部分传统岗位被替代风险影响职业稳定性",
                        "C": "竞争加剧导致岗位变动频繁影响职业稳定性", "D": "员工不需要进行职业规划调整"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 1，组织数智化转型促使员工在职业规划中注重多维度能力的培养，部分传统岗位面临被替代风险，竞争加剧导致岗位变动频繁，使员工的职业稳定性相对减弱，需要更灵活地规划自己的职业发展，所以员工需要进行职业规划调整。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "组织数智化转型盘点与测评的作用有（  ）",
            "options": {"A": "合理调整资源分配", "B": "及时发现问题，降低转型风险", "C": "提升组织竞争力，适应市场变化",
                        "D": "增加组织的运营成本"},
            "answer": ["A", "B", "C"],
            "explanation": "由recall slice 2可知，组织数智化转型盘点与测评可以基于盘点与测评结果合理调整资源分配，及时发现问题并采取措施加以解决，提升组织竞争力，适应市场变化，其目的是提高整体资源的投入产出效率，而不是增加运营成本。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "在绩效评估中，为实现全面绩效洞察，数据收集与整合的步骤包括（  ）",
            "options": {"A": "多源数据采集", "B": "数据整合与清洗", "C": "实时与动态数据跟踪", "D": "不收集数据"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 3，数据收集与整合实现全面绩效洞察包括多源数据采集、数据整合与清洗、实时与动态数据跟踪。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "组织数智化转型测评的正确流程包括（  ）",
            "options": {"A": "明确测评目的", "B": "收集相关数据", "C": "进行数据分析与结果解读",
                        "D": "形成测评报告并反馈应用"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 4可知，组织数智化转型测评的正确流程包括明确测评目的、按照选定的测评方法全面收集相关数据、进行数据分析与结果解读、形成测评报告并反馈应用。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "在利用数智化手段开展培训和开发工作时，精准分析培训需求的方法有（  ）",
            "options": {"A": "数据收集与整合", "B": "员工画像构建", "C": "不考虑员工数据", "D": "随意确定培训需求"},
            "answer": ["A", "B"],
            "explanation": "根据recall slice 5，精准分析培训需求包括数据收集与整合，借助组织内部的信息系统收集员工的各类数据，通过大数据分析技术挖掘员工在知识、技能方面的实际差距以及未来职业发展所需的能力提升点；员工画像构建，基于收集的数据为每位员工构建详细的个人画像，实现个性化的培训需求分析。所以选AB。"
        },
        {
            "type": "多项选择题",
            "content": "定制化培训内容开发的做法有（  ）",
            "options": {"A": "内容数字化与模块化", "B": "融入数智化案例与实践", "C": "不进行内容转换和模块化拆分",
                        "D": "不考虑数智化案例"},
            "answer": ["A", "B"],
            "explanation": "由recall slice 5可知，定制化培训内容开发要将传统的培训教材、教案等内容进行数字化转换，制作成多样化的数字资源，同时按照知识点或技能点将这些内容进行模块化拆分，方便根据不同的培训需求灵活组合，还要融入数智化案例与实践。所以选AB。"
        },
        {
            "type": "多项选择题",
            "content": "组织数智化转型中，员工可能面临的职业挑战有（  ）",
            "options": {"A": "部分传统岗位被替代风险", "B": "竞争加剧导致岗位变动频繁", "C": "职业稳定性增强",
                        "D": "不需要提升技能"},
            "answer": ["A", "B"],
            "explanation": "根据recall slice 1，随着自动化、人工智能等技术的应用，部分传统岗位面临被替代风险，数智化转型吸引大量人才涌入相关领域，竞争加剧导致岗位变动频繁，员工的职业稳定性相对减弱，需要及时提升技能以应对变化。所以选AB。"
        },
        {
            "type": "多项选择题",
            "content": "在绩效评估中，确定的 KPI 可以包括（  ）",
            "options": {"A": "生产设备自动化运行率", "B": "通过大数据分析优化生产计划后原材料库存周转率的提升幅度",
                        "C": "员工参与数智化培训课程的时长及考核成绩", "D": "在工作中运用新技术解决实际问题的案例数量"},
            "answer": ["A", "B", "C", "D"],
            "explanation": "由recall slice 3可知，围绕组织数智化转型的整体目标确定相应的KPI，如生产设备自动化运行率、通过大数据分析优化生产计划后原材料库存周转率的提升幅度等，同时在绩效评估中纳入员工在数智化技能提升、新知识学习等方面的指标，如员工参与数智化培训课程的时长及考核成绩、在工作中运用新技术解决实际问题的案例数量等。所以ABCD都选。"
        },
        {
            "type": "多项选择题",
            "content": "组织数智化转型测评中，数据收集的方式有（  ）",
            "options": {"A": "问卷调查", "B": "访谈", "C": "从业务系统获取数据分析类数据", "D": "不收集数据"},
            "answer": ["A", "B", "C"],
            "explanation": "根据recall slice 4，按照选定的测评方法，全面收集相关数据，包括问卷调查、访谈、从业务系统等渠道获取的数据分析类数据。所以选ABC。"
        },
        {
            "type": "多项选择题",
            "content": "宣传企业文化在组织数智化转型中的作用有（  ）",
            "options": {"A": "增强人才对企业的认同感和归属感", "B": "让人才感受到企业的人文关怀和良好氛围",
                        "C": "吸引人才加入企业", "D": "降低企业的凝聚力"},
            "answer": ["A", "B", "C"],
            "explanation": "由recall slice 5可知，宣传企业积极向上、鼓励创新、包容失败的企业文化，强调在数智化转型过程中为员工提供的学习机会、职业发展空间以及舒适的工作环境等，能让人才感受到企业的人文关怀和良好氛围，增强对企业的认同感和归属感，吸引人才加入企业，提升企业的凝聚力，而不是降低。所以选ABC。"
        },
        {
            "type": "判断题",
            "content": "组织数智化转型只需要员工具备专业技术能力，不需要其他能力。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 1，组织数智化转型更看重具备复合型技能的人才，员工除了要精通专业技术领域，还需要了解业务逻辑、具备良好的沟通协作能力以及问题解决能力等。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "数智化转型中，所有传统岗位都不会面临被替代的风险。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，随着自动化、人工智能等技术在业务流程中的应用，一些重复性、规律性强的传统岗位面临被机器或软件替代的风险。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "组织数智化转型盘点与测评对组织没有任何作用。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 2，组织数智化转型盘点与测评可以合理调整资源分配，及时发现问题，降低转型风险，提升组织竞争力，适应市场变化。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "在绩效评估中，不需要确定 KPI 来确保员工工作成果与组织数智化转型方向契合。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 3可知，围绕组织数智化转型的整体目标，确定相应的KPI，确保员工的工作成果与组织数智化转型方向紧密契合。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "在数据收集与整合实现全面绩效洞察时，不需要进行数据整合与清洗。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 3，运用数据仓库、数据湖等技术将分散的多源数据进行整合，统一数据格式和标准，并对数据进行清洗，去除重复、错误或不完整的数据，确保数据的质量和可用性。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "组织数智化转型测评的数据收集阶段不需要保证数据的准确性和完整性。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 4可知，在数据收集阶段，对于从业务系统等渠道获取的数据分析类数据，要保证数据的准确性和完整性，统一数据格式后进行汇总整理。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "组织数智化转型中，宣传企业文化没有任何作用。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 5，宣传企业文化能让人才感受到企业的人文关怀和良好氛围，增强对企业的认同感和归属感，吸引人才加入企业。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "在利用数智化手段开展培训和开发工作时，不需要精准分析培训需求。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 5可知，利用数智化手段开展培训和开发工作，要精准分析培训需求，通过数据收集与整合和员工画像构建来实现。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "定制化培训内容开发不需要将传统培训内容进行数字化转换和模块化拆分。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "根据recall slice 5，定制化培训内容开发要将传统的培训教材、教案等内容进行数字化转换，制作成多样化的数字资源，同时按照知识点或技能点将这些内容进行模块化拆分，方便根据不同的培训需求灵活组合。所以该说法错误。"
        },
        {
            "type": "判断题",
            "content": "组织数智化转型不会影响员工的职业稳定性。（  ）",
            "options": null,
            "answer": "×",
            "explanation": "由recall slice 1可知，组织数智化转型使部分传统岗位面临被替代风险，竞争加剧导致岗位变动频繁，员工的职业稳定性相对减弱。所以该说法错误。"
        }
];

// 按题型随机抽题函数
function getRandomQuestions() {
    const typeMap = {
        '单项选择题': [],
        '多项选择题': [],
        '判断题': []
    };

    questionBank.forEach(q => {
        if (typeMap[q.type]) typeMap[q.type].push(q);
    });

    return Object.values(typeMap).reduce((acc, arr) => {
        return acc.concat(arr.sort(() => 0.5 - Math.random()).slice(0,5));
    }, []).map((q, i) => ({...q, displayNumber: i+1}));
}

// 游戏数据
const gameData = {
            quarter: 1,
            year: 2023,
            budget: 50000000,
            marketShare: 32,
            revenue: 1200000000,
            profit: 180000000,
            riskIndex: 45,
            employeeSatisfaction: 75,
            decisions: [],
            trends: {
                quarters: ["Q1 2023"],
                marketShare: [32],
                revenue: [1200],
                profit: [180],
                risk: [45],
                satisfaction: [75]
            },
            companySize: 3,
            environment: "stable",
            buildings: [],
            skills: {
                vision: 65,
                riskControl: 45,
                execution: 72,
                innovation: 58,
                teamwork: 60,
                finance: 68
            },
            learningProgress: {
                strategy: 40,
                change: 15,
                risk: 25
            }
        };

        // 全局已答题记录集合，避免重复声明
        let answeredQuestions = new Set();

        // 前端请求接口
async function loadRandomQuestions() {
    try {
        const type = document.getElementById('questionType').value;
        const response = await fetch(`/api/random-questions?type=${type}`);
        const questions = await response.json();
        renderQuestions(questions);
    } catch (error) {
        console.error('获取题目失败:', error);
    }
}

// 加载题目函数
function loadQuizQuestions() {
    renderQuestions();
}

// 更新进度条
function updateProgress() {
    const answered = document.querySelectorAll('.question-card:has(input:checked)').length;
    const progressFill = document.getElementById('progress-fill');
    const progressText = document.getElementById('progress-text');
    
    if (progressFill && progressText) {
        const progress = Math.round((answered / 15) * 100);
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${answered}/15`;
    }
}

// 初始化测试
function initTest() {
    renderQuestions();
    updateProgress(0, questions.length);
    
    // 监听答题事件
    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            const answered = document.querySelectorAll('.question-card.answered').length;
            updateProgress(answered, questions.length);
        });
    });
}

// 渲染题目到页面
function renderQuestions(questions) {
    const container = document.getElementById('quizContainer');
    let html = '';

    // 重新加载题目时清空之前的答题记录
    answeredQuestions.clear();
    updateProgress(0, questions.length);

    questions.forEach((q, index) => {
        let optionsHtml = '';
        const isMultiple = q.type.includes('多项');
        const inputType = isMultiple ? 'checkbox' : 'radio';
        const nameAttr = `question-${index}`;

        if (q.type === '判断题') {
            optionsHtml = `
                <label class="quiz-option">
                    <input type="radio" name="q${index}" value="√">
                    √
                </label>
                <label class="quiz-option">
                    <input type="radio" name="q${index}" value="×">
                    ×
                </label>
            `;
        } else if (q.options) {
            Object.entries(q.options).forEach(([key, value], i) => {
                optionsHtml += `
                    <label class="quiz-option">
                        <input type="${inputType}" 
                               name="${nameAttr}"
                               data-question-id="${index}"
                               value="${key}">
                        ${key}. ${value}
                    </label>
                `;
            });
        }

        html += `
            <div class="question-card" data-id="${index}" data-type="${q.type}" data-correct-answer="${q.answer}">
                <div class="question-header">
            <span class="question-number">第${index+1}题</span>
            <div class="question-body">${q.content}</div>
            <button class="toggle-explanation">点击展开解析</button>
        </div>
                <div class="quiz-explanation" style="display: none;">
                    ${q.explanation || '暂无解析内容'}
                </div>
                <div class="question-options">${optionsHtml}</div>
            </div>
        `;
    });

    container.innerHTML = html;

    // 绑定选项变更事件
    let questionStates = {}; // 改为存储题目状态的对象

    document.querySelectorAll('.quiz-option input').forEach(input => {
        input.addEventListener('change', function() {
            this.closest('.question-card').classList.add('answered');
            const questionId = this.closest('.question-card').dataset.id;
            const questionType = this.closest('.question-card').dataset.type;
            
            // 初始化题目状态
            if (!questionStates[questionId]) {
                questionStates[questionId] = {
                    selectedCount: 0,
                    type: questionType
                };
            }

            // 更新选中计数
            if (this.checked) {
                questionStates[questionId].selectedCount++;
            } else {
                questionStates[questionId].selectedCount--;
            }

            // 处理进度逻辑
            const currentState = questionStates[questionId];
            const wasAnswered = answeredQuestions.has(questionId);
            
            if (currentState.type === '多项选择题') {
                // 多选题：首次选中增加，全部取消时减少
                if (currentState.selectedCount === 1 && this.checked) {
                    answeredQuestions.add(questionId);
                } else if (currentState.selectedCount === 0 && !this.checked && wasAnswered) {
                    answeredQuestions.delete(questionId);
                }
            } else {
                // 单选题/判断题：选中即增加，取消即减少
                if (this.checked && !wasAnswered) {
                    answeredQuestions.add(questionId);
                } else if (!this.checked && wasAnswered) {
                    answeredQuestions.delete(questionId);
                }
            }

            updateProgress(answeredQuestions.size, questions.length);
        });
    });

    // 解析展开/收起功能
    document.querySelectorAll('.toggle-explanation').forEach(btn => {
        btn.addEventListener('click', function() {
            const explanation = this.closest('.question-card').querySelector('.quiz-explanation');
            const isHidden = explanation.style.display === 'none';
            explanation.style.display = isHidden ? 'block' : 'none';
            this.textContent = isHidden ? '点击收起解析' : '点击展开解析';
        });
    });
}

        // 音频元素
        const positiveSound = document.getElementById('positiveSound');
        const negativeSound = document.getElementById('negativeSound');
        const neutralSound = document.getElementById('neutralSound');
        const envSound = document.getElementById('envSound');
        const successSound = document.getElementById('successSound');

        // 图表实例
        let trendChart, radarChart;
        
        // 初始化游戏
document.addEventListener('DOMContentLoaded', () => {
    if (typeof questionBank === 'undefined') {
        questionBank = []; // 防止重复声明
    }
    
    if (!document.getElementById('quizContainer')) {
        console.error('错误：请确保HTML中存在<div id="quizContainer">元素');
        return;
    }
    
    loadQuizQuestions();
    updateProgress(0, 15);
    initCharts();
    updateBuildings();
    updateUI();
    updateDecisionLog();
    
    // 初始化题目数据
    renderQuestions();
    
    // 随机环境变化
    setInterval(randomEnvironmentChange, 20000);
});

        // 初始化图表
        function initCharts() {
            // 雷达图
            const radarCtx = document.getElementById('radarChart').getContext('2d');
            radarChart = new Chart(radarCtx, {
                type: 'radar',
                data: {
                    labels: ['战略视野', '风险控制', '执行效率', '创新思维', '团队协作', '财务敏锐'],
                    datasets: [{
                        label: '能力评估',
                        data: [
                            gameData.skills.vision,
                            gameData.skills.riskControl,
                            gameData.skills.execution,
                            gameData.skills.innovation,
                            gameData.skills.teamwork,
                            gameData.skills.finance
                        ],
                        backgroundColor: 'rgba(58, 123, 213, 0.2)',
                        borderColor: 'rgba(58, 123, 213, 1)',
                        pointBackgroundColor: 'rgba(58, 123, 213, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(58, 123, 213, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(0,0,0,0.1)'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        // 切换标签页
        function switchTab(tabId) {
    // 更新标签按钮状态
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    document.querySelector(`.tab-btn[onclick="switchTab('${tabId}')"]`).classList.add('active');
    
    // 更新内容显示
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.getElementById(`${tabId}Tab`).classList.add('active');
    
    // 如果是能力档案页，更新雷达图
    if (tabId === 'profile') {
        updateRadarChart();
    }
    // 切换到能力测试时加载题目
    if (tabId === 'quiz') {
        loadQuizQuestions();
    }
}

        // 做出决策
        function makeDecision(option) {
            // 根据决策更新游戏状态
            const result = updateGameState(option);
            
            // 显示反馈
            showFeedback(option, result);
            
            // 进入下一季度
            nextQuarter();
            
            // 更新UI
            updateUI();
            
            // 更新决策日志
            updateDecisionLog();
            
            // 播放音效
            playFeedbackSound(result.effect);
            
            // 更新能力值
            updateSkills(option, result);
        }

        // 更新游戏状态
        function updateGameState(option) {
            let marketShareChange = 0;
            let revenueChange = 0;
            let profitChange = 0;
            let riskChange = 0;
            let satisfactionChange = 0;
            let cost = 0;
            let effect = 'neutral'; // positive, negative, neutral
            let feedback = '';
            
            // 环境影响因子
            let envFactor = 1;
            if (gameData.environment === 'growth') envFactor = 1.2;
            if (gameData.environment === 'recession') envFactor = 0.8;
            
            switch(option) {
                case 1: // 加大研发投入
                    cost = 15000000;
                    marketShareChange = (-2 + Math.random() * 6) * envFactor;
                    revenueChange = (-5 + Math.random() * 10) * envFactor;
                    profitChange = (-15 + Math.random() * 10) * envFactor; // 调整波动范围为-15~-5
                    riskChange = (10 + Math.random() * 10) * envFactor;
                    satisfactionChange = (3 + Math.random() * 4) * envFactor; // 调整波动范围为3~7
                    feedback = "研发投入将增强长期竞争力，但短期利润压力增大。";
                    effect = marketShareChange > 2 ? 'positive' : (profitChange < -15 ? 'negative' : 'neutral');
                    break;
                case 2: // 并购竞争对手
                    cost = 30000000;
                    marketShareChange = (3 + Math.random() * 8) * envFactor;
                    revenueChange = (10 + Math.random() * 20) * envFactor;
                    profitChange = (-20 + Math.random() * 15) * envFactor; // 调整波动范围为-20~-5
                    riskChange = (20 + Math.random() * 15) * envFactor;
                    satisfactionChange = (-8 + Math.random() * 12) * envFactor; // 调整波动范围为-8~4
                    feedback = "并购快速扩大了市场份额，但整合挑战不容忽视。";
                    effect = marketShareChange > 5 ? 'positive' : (profitChange < -20 ? 'negative' : 'neutral');
                    break;
                case 3: // 优化现有产品线
                    cost = 5000000;
                    marketShareChange = (-3 + Math.random() * 4) * envFactor;
                    revenueChange = (-5 + Math.random() * 5) * envFactor;
                    profitChange = (10 + Math.random() * 8) * envFactor; // 调整波动范围为10~18
                    riskChange = (-5 + Math.random() * 5) * envFactor;
                    satisfactionChange = (-10 + Math.random() * 8) * envFactor; // 调整波动范围为-10~-2
                    feedback = "成本削减改善了短期利润，但可能影响员工士气。";
                    effect = profitChange > 15 ? 'positive' : (satisfactionChange < -10 ? 'negative' : 'neutral');
                    break;
                case 4: // 开拓新兴市场
                    cost = 20000000;
                    marketShareChange = (1 + Math.random() * 10) * envFactor;
                    revenueChange = (5 + Math.random() * 25) * envFactor;
                    profitChange = (-8 + Math.random() * 14) * envFactor; // 调整波动范围为-8~6
                    riskChange = (15 + Math.random() * 10) * envFactor;
                    satisfactionChange = (2 + Math.random() * 6) * envFactor; // 调整波动范围为2~8
                    feedback = "新兴市场带来增长机会，但初期投入较大。";
                    effect = revenueChange > 15 ? 'positive' : (profitChange < -10 ? 'negative' : 'neutral');
                    break;
            }
            
            // 应用变化
            gameData.budget -= cost;
            gameData.marketShare = Math.max(5, Math.min(100, gameData.marketShare + marketShareChange));
            gameData.revenue = Math.max(200000000, gameData.revenue * (1 + revenueChange/100));
            gameData.profit = Math.max(0, gameData.profit * (1 + profitChange/100));
            gameData.riskIndex = Math.max(10, Math.min(100, gameData.riskIndex + riskChange));
            gameData.employeeSatisfaction = Math.max(30, Math.min(100, gameData.employeeSatisfaction + satisfactionChange));
            
            // 更新公司规模 (根据营收增长)
            const growthFactor = (gameData.revenue / 1200000000) - 1; // 相对于初始1.2B的增长
            gameData.companySize = Math.max(1, Math.min(10, Math.floor(3 + growthFactor * 5)));
            
            // 记录决策
            const decision = {
                quarter: `Q${gameData.quarter} ${gameData.year}`,
                option: option,
                marketShareChange: marketShareChange,
                revenueChange: revenueChange,
                profitChange: profitChange,
                riskChange: riskChange,
                effect: effect
            };
            gameData.decisions.push(decision);
            
            return {
                effect: effect,
                feedback: feedback,
                marketShareChange: marketShareChange,
                revenueChange: revenueChange,
                profitChange: profitChange,
                riskChange: riskChange,
                satisfactionChange: satisfactionChange
            };
        }

        // 更新能力值
        function updateSkills(option, result) {
            // 根据决策类型和能力影响更新技能值
            switch(option) {
                case 1: // 研发投入
                    gameData.skills.innovation = Math.min(100, gameData.skills.innovation + 2);
                    gameData.skills.vision = Math.min(100, gameData.skills.vision + 1);
                    gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 1);
                    break;
                case 2: // 并购
                    gameData.skills.execution = Math.min(100, gameData.skills.execution + 1);
                    gameData.skills.finance = Math.min(100, gameData.skills.finance + 1);
                    gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 2);
                    break;
                case 3: // 优化
                    gameData.skills.finance = Math.min(100, gameData.skills.finance + 2);
                    gameData.skills.teamwork = Math.max(0, gameData.skills.teamwork - 1);
                    break;
                case 4: // 新兴市场
                    gameData.skills.vision = Math.min(100, gameData.skills.vision + 2);
                    gameData.skills.riskControl = Math.min(100, gameData.skills.riskControl + 1);
                    break;
            }
            
            // 根据结果调整能力值
            if (result.effect === 'positive') {
                gameData.skills.execution = Math.min(100, gameData.skills.execution + 1);
                gameData.skills.teamwork = Math.min(100, gameData.skills.teamwork + 1);
            } else if (result.effect === 'negative') {
                gameData.skills.riskControl = Math.max(0, gameData.skills.riskControl - 1);
            }
            
            // 更新学习进度
            if (option === 1 || option === 4) {
                gameData.learningProgress.strategy = Math.min(100, gameData.learningProgress.strategy + 5);
            }
            if (option === 2) {
                gameData.learningProgress.change = Math.min(100, gameData.learningProgress.change + 5);
            }
            if (option === 3) {
                gameData.learningProgress.risk = Math.min(100, gameData.learningProgress.risk + 5);
            }
        }

        // 进入下一季度
        function nextQuarter() {
            gameData.quarter++;
            if (gameData.quarter > 4) {
                gameData.quarter = 1;
                gameData.year++;
                
                // 每年随机环境变化
                randomEnvironmentChange(true);
                
                // 每年生成诊断报告
                if (gameData.year > 2023) {
                    setTimeout(() => {
                        showAnnualReport();
                    }, 1000);
                }
            }
            
            // 更新趋势数据
            gameData.trends.quarters.push(`Q${gameData.quarter} ${gameData.year}`);
            gameData.trends.marketShare.push(Math.round(gameData.marketShare));
            gameData.trends.revenue.push(Math.round(gameData.revenue / 1000000));
            gameData.trends.profit.push(Math.round(gameData.profit / 1000000));
            gameData.trends.risk.push(Math.round(gameData.riskIndex));
            gameData.trends.satisfaction.push(Math.round(gameData.employeeSatisfaction));
            
            // 更新公司建筑
            updateBuildings();
        }

        // 更新UI
        function updateUI() {
            document.getElementById('marketShare').textContent = `${Math.round(gameData.marketShare)}%`;
            document.getElementById('revenue').textContent = `¥${formatNumber(gameData.revenue)}`;
            document.getElementById('profit').textContent = `¥${formatNumber(gameData.profit)}`;
            document.getElementById('riskIndex').textContent = Math.round(gameData.riskIndex);
            
            // 更新情景文本
            updateScenarioText();
        }

        // 更新公司建筑可视化
        function updateBuildings() {
            const companyVisual = document.getElementById('companyVisual');
            
            // 清除现有建筑
            companyVisual.innerHTML = '';
            gameData.buildings = [];
            
            // 创建新建筑
            const buildingCount = Math.max(3, Math.min(7, gameData.companySize));
            const mainTowerIndex = Math.floor(buildingCount / 2);
            
            for (let i = 0; i < buildingCount; i++) {
                const isMainTower = i === mainTowerIndex;
                const height = isMainTower ? 
                    80 + (gameData.companySize * 10) : 
                    40 + (gameData.companySize * 5) + (Math.random() * 20 - 10);
                
                const building = document.createElement('div');
                building.className = `building ${isMainTower ? 'main-tower' : ''}`;
                building.style.height = `${height}px`;
                
                // 创建窗户
                const windowCount = Math.floor(height / 15) * 2;
                const windows = document.createElement('div');
                windows.className = 'building-windows';
                
                for (let j = 0; j < windowCount; j++) {
                    const window = document.createElement('div');
                    window.className = 'window';
                    windows.appendChild(window);
                }
                
                building.appendChild(windows);
                companyVisual.appendChild(building);
                gameData.buildings.push(building);
                
                // 随机点亮窗户
                setTimeout(() => {
                    const windowElements = building.querySelectorAll('.window');
                    windowElements.forEach(w => {
                        if (Math.random() > 0.3) { // 70%的窗户亮着
                            w.style.backgroundColor = '#ffeaa7';
                            w.style.boxShadow = '0 0 5px #ffeaa7';
                        }
                    });
                }, 100);
            }
            
            // 如果公司规模很大，显示庆祝效果
            if (gameData.companySize >= 8) {
                showCelebration();
            }
        }

        // 更新决策日志
        function updateDecisionLog() {
            const logContainer = document.getElementById('decisionLog');
            logContainer.innerHTML = '';
            
            // 只显示最近5条决策
            const recentDecisions = gameData.decisions.slice(-5).reverse();
            
            recentDecisions.forEach(decision => {
                const logEntry = document.createElement('div');
                logEntry.style.padding = '5px 0';
                logEntry.style.borderBottom = '1px solid #f0f0f0';
                
                const optionName = getOptionName(decision.option);
                const effectIcon = decision.effect === 'positive' ? '✅' : decision.effect === 'negative' ? '❌' : '➖';
                
                logEntry.innerHTML = `
                    <strong>${decision.quarter}</strong>: ${optionName} 
                    <span style="float: right;">${effectIcon}</span>
                    <div style="font-size: 0.8rem; color: #666;">
                        市场份额: ${decision.marketShareChange > 0 ? '+' : ''}${decision.marketShareChange.toFixed(1)}% | 
                        风险指数: ${decision.riskChange > 0 ? '+' : ''}${decision.riskChange.toFixed(1)}
                    </div>
                `;
                
                logContainer.appendChild(logEntry);
            });
        }

        // 更新雷达图
        function updateRadarChart() {
            radarChart.data.datasets[0].data = [
                gameData.skills.vision,
                gameData.skills.riskControl,
                gameData.skills.execution,
                gameData.skills.innovation,
                gameData.skills.teamwork,
                gameData.skills.finance
            ];
            radarChart.update();
        }

        // 随机环境变化
        function randomEnvironmentChange(isAnnual = false) {
            if (Math.random() > 0.5 || isAnnual) {
                const environments = [
                    { type: "stable", name: "稳定", message: "经济环境回归稳定状态" },
                    { type: "growth", name: "增长", message: "经济进入增长期！市场需求旺盛" },
                    { type: "recession", name: "衰退", message: "经济衰退开始，市场收缩" }
                ];
                
                const newEnv = environments[Math.floor(Math.random() * environments.length)];
                if (newEnv.type !== gameData.environment) {
                    gameData.environment = newEnv.type;
                    
                    // 显示环境变化提示
                    const envChange = document.getElementById('envChange');
                    envChange.textContent = newEnv.message;
                    envChange.style.display = 'block';
                    
                    // 播放环境变化音效
                    envSound.play();
                    
                    // 3秒后隐藏提示
                    setTimeout(() => {
                        envChange.style.display = 'none';
                    }, 3000);
                    
                    // 添加到决策日志
                    const logEntry = document.createElement('div');
                    logEntry.style.padding = '5px 0';
                    logEntry.style.color = newEnv.type === 'growth' ? '#4CAF50' : newEnv.type === 'recession' ? '#F44336' : '#2196F3';
                    logEntry.innerHTML = `<strong>环境变化</strong>: ${newEnv.message}`;
                    document.getElementById('decisionLog').prepend(logEntry);
                }
            }
        }

        // 显示反馈弹窗
        function showFeedback(option, result) {
            const modal = document.getElementById('feedbackModal');
            const content = document.getElementById('modalFeedbackContent');
            
            let fullFeedback = result.feedback;
            
            // 添加环境影响的说明
            if (gameData.environment === 'growth') {
                fullFeedback += "<br><br>经济处于增长期，市场对创新举措反应积极！";
            } else if (gameData.environment === 'recession') {
                fullFeedback += "<br><br>经济衰退影响了决策效果，消费者支出减少。";
            }
            
            // 添加具体数据变化
            fullFeedback += `<br><br><strong>影响结果:</strong>
                <br>• 市场份额: ${result.marketShareChange > 0 ? '+' : ''}${result.marketShareChange.toFixed(1)}%
                <br>• 营收: ${result.revenueChange > 0 ? '+' : ''}${result.revenueChange.toFixed(1)}%
                <br>• 利润: ${result.profitChange > 0 ? '+' : ''}${result.profitChange.toFixed(1)}%
                <br>• 风险指数: ${result.riskChange > 0 ? '+' : ''}${result.riskChange.toFixed(1)}`;
            
            // 添加能力提升提示
            if (option === 1 || option === 4) {
                fullFeedback += "<br><br><strong>能力提升:</strong> 战略视野 +1，创新思维 +2";
            } else if (option === 2) {
                fullFeedback += "<br><br><strong>能力提升:</strong> 执行效率 +1，财务敏锐 +1";
            }
            
            content.innerHTML = fullFeedback;
            modal.style.display = 'flex';
        }

        // 显示年度报告
        function showAnnualReport() {
            const modal = document.getElementById('feedbackModal');
            const content = document.getElementById('modalFeedbackContent');
            
            let report = `<h3 style="color: var(--hby-orange); margin-bottom: 10px;">${gameData.year-1}年度战略决策报告</h3>`;
            
            // 年度总结
            const revenueGrowth = ((gameData.revenue - 1200000000) / 1200000000 * 100).toFixed(1);
            const profitGrowth = ((gameData.profit - 180000000) / 180000000 * 100).toFixed(1);
            
            report += `<p><strong>年度业绩:</strong>
                <br>• 营收增长: ${revenueGrowth > 0 ? '+' : ''}${revenueGrowth}%
                <br>• 利润增长: ${profitGrowth > 0 ? '+' : ''}${profitGrowth}%
                <br>• 平均风险指数: ${calculateAverage(gameData.trends.risk).toFixed(1)}</p>`;
            
            // 决策分析
            report += `<p><strong>决策模式分析:</strong>`;
            
            const riskDecisions = gameData.decisions.filter(d => d.option === 2 || d.option === 4).length;
            if (riskDecisions > 3) {
                report += "<br>• 高风险决策占比过高，建议加强风险评估";
            }
            
            const profitFocus = gameData.decisions.filter(d => d.option === 3).length;
            if (profitFocus > 2) {
                report += "<br>• 过度关注短期利润，可能影响长期竞争力";
            }
            
            // 能力发展建议
            report += `<p><strong>能力发展建议:</strong>
                <br>• 当前风险控制能力: ${gameData.skills.riskControl}/100
                <br>• 建议完成风险管理课程和情景规划训练</p>`;
            
            content.innerHTML = report;
            modal.style.display = 'flex';
        }

        // 计算平均值
        function calculateAverage(arr) {
            return arr.reduce((a, b) => a + b, 0) / arr.length;
        }

        // 关闭弹窗
        function closeModal() {
            document.getElementById('feedbackModal').style.display = 'none';
        }

        // 播放反馈音效
        function playFeedbackSound(type) {
            switch(type) {
                case 'positive':
                    positiveSound.play();
                    break;
                case 'negative':
                    negativeSound.play();
                    break;
                default:
                    neutralSound.play();
            }
        }

        // 显示庆祝效果
        function showCelebration() {
            // 播放成功音效
            successSound.play();
            
            // 创建彩色纸屑效果
            for (let i = 0; i < 30; i++) {
                createConfetti();
            }
        }

        // 创建彩色纸屑
        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            
            // 随机颜色
            const colors = ['#FF6B35', '#004E89', '#4CAF50', '#FFC107', '#9C27B0'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.backgroundColor = randomColor;
            
            // 随机位置
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.width = `${5 + Math.random() * 10}px`;
            confetti.style.height = `${5 + Math.random() * 10}px`;
            
            // 随机动画延迟
            confetti.style.animationDelay = `${Math.random() * 0.5}s`;
            
            document.body.appendChild(confetti);
            
            // 动画结束后移除
            setTimeout(() => {
                confetti.remove();
            }, 3000);
        }

        // 更新情景文本
        function updateScenarioText() {
            const scenarios = [
                "公司面临市场份额连续三个季度下滑，竞争对手推出了颠覆性产品，董事会要求立即采取行动扭转局面。",
                "经济环境不确定性增加，投资者对公司增长前景表示担忧，要求更清晰的战略路线图。",
                "关键技术人才被竞争对手挖角，同时新产品开发进度落后于计划。",
                "监管环境发生变化，影响了公司核心业务的盈利模式，需要战略调整。",
                "公司成功上市后，面临更大的业绩压力和公众监督，需要平衡短期目标与长期战略。",
                "新兴技术崛起可能颠覆行业，公司需要决定是引领变革还是巩固现有优势。",
                "全球供应链中断导致生产成本上升，需要重新评估生产和分销策略。",
                "主要客户要求大幅降价，否则将转向竞争对手，面临利润率压力。"
            ];
            
            const randomScenario = scenarios[Math.floor(Math.random() * scenarios.length)];
            document.getElementById('scenarioText').textContent = randomScenario;
        }

        // 获取决策选项名称
        function getOptionName(option) {
            switch(option) {
                case 1: return '研发投入';
                case 2: return '并购';
                case 3: return '优化产品';
                case 4: return '新兴市场';
                default: return '未知';
            }
        }

        // 选择题选项选择
        function selectOption(element) {
            // 移除同题目其他选项的选中状态
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('selected');
            });
            // 添加当前选项的选中状态
            element.classList.add('selected');
        }
        
        document.querySelectorAll('.quiz-option input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        this.closest('.quiz-option').classList.toggle('selected', this.checked);
    });
});
        // 检查答案
        function checkAnswer() {
            // 在实际应用中，这里会验证答案并给出反馈
            alert("答案已提交！系统将记录您的学习进度。");
        }

        // 显示解析
        function showExplanation(id) {
            const explanation = document.getElementById(id);
            if (explanation.style.display === 'none') {
                explanation.style.display = 'block';
            } else {
                explanation.style.display = 'none';
            }
        }

        // 格式化数字显示
        function formatNumber(num) {
            if (num >= 100000000) {
                return (num / 100000000).toFixed(1) + '亿';
            } else if (num >= 10000) {
                return (num / 10000).toFixed(1) + '万';
            }
            return num.toLocaleString();
        }
    </script>
</body>
</html>